
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>py3dframe.frame &#8212; py3dframe 1.3.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=bb516dca"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/py3dframe/frame';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">py3dframe 1.3.1 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage.html">
    Usage
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../installation.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage.html">
    Usage
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Module code</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">py3dframe.frame</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for py3dframe.frame</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2025 Artezaru</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Sequence</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span> 
<span class="kn">import</span><span class="w"> </span><span class="nn">scipy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.switch_RT_convention</span><span class="w"> </span><span class="kn">import</span> <span class="n">switch_RT_convention</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.matrix</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_SO3</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.rotation</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rotation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.__version__</span><span class="w"> </span><span class="kn">import</span> <span class="n">__version__</span>

<div class="viewcode-block" id="Frame">
<a class="viewcode-back" href="../../api_doc/frame.html#py3dframe.Frame">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Frame</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Frame object represents a frame of reference of :math:`\mathbb{R}^3`.</span>
<span class="sd">    </span>
<span class="sd">    .. warning::</span>

<span class="sd">        Only right-handed orthogonal frames are supported (orthonormal basis vectors with a positive determinant).</span>

<span class="sd">    A frame of reference is defined by </span>
<span class="sd">    </span>
<span class="sd">    - An origin :math:`O_F` as a 3-element vector.</span>
<span class="sd">    - Three basis vectors :math:`\mathbf{e}_1`, :math:`\mathbf{e}_2` and :math:`\mathbf{e}_3` as 3-element vectors.</span>

<span class="sd">    For example:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        import numpy</span>
<span class="sd">        from py3dframe import Frame</span>
<span class="sd">        e1 = [1, 0, 0]</span>
<span class="sd">        e2 = [0, 1, 0]</span>
<span class="sd">        e3 = [0, 0, 1]</span>
<span class="sd">        origin = [1, 2, 3]</span>
<span class="sd">        frame = Frame.from_axes(origin=origin, x_axis=e1, y_axis=e2, z_axis=e3)</span>

<span class="sd">    The frame can also be defined by its transformation relative to its parent frame (by default the global canonical frame of :math:`\mathbb{R}^3`).</span>
<span class="sd">    Lets note :math:`E` the parent frame (or the global frame of :math:`\mathbb{R}^3`) and :math:`F` the frame to define.</span>
<span class="sd">    The transformation between the frame :math:`E` and the frame :math:`F` is defined by a rotation matrix :math:`R` and a translation vector :math:`T`.</span>
<span class="sd">    Several conventions can be used to define the transformation between the frames.</span>

<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | Index               | Formula                                                        |</span>
<span class="sd">    +=====================+================================================================+</span>
<span class="sd">    | 0                   | :math:`\mathbf{X}_E = \mathbf{R} \mathbf{X}_F + \mathbf{T}`    |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | 1                   | :math:`\mathbf{X}_E = \mathbf{R} \mathbf{X}_F - \mathbf{T}`    |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | 2                   | :math:`\mathbf{X}_E = \mathbf{R} (\mathbf{X}_F + \mathbf{T})`  |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | 3                   | :math:`\mathbf{X}_E = \mathbf{R} (\mathbf{X}_F - \mathbf{T})`  |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | 4                   | :math:`\mathbf{X}_F = \mathbf{R} \mathbf{X}_E + \mathbf{T}`    |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | 5                   | :math:`\mathbf{X}_F = \mathbf{R} \mathbf{X}_E - \mathbf{T}`    |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | 6                   | :math:`\mathbf{X}_F = \mathbf{R} (\mathbf{X}_E + \mathbf{T})`  |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>
<span class="sd">    | 7                   | :math:`\mathbf{X}_F = \mathbf{R} (\mathbf{X}_E - \mathbf{T})`  |</span>
<span class="sd">    +---------------------+----------------------------------------------------------------+</span>

<span class="sd">    .. note::</span>

<span class="sd">        If the axes are provided, the class will normalize the basis vectors to get an orthonormal matrix.    </span>

<span class="sd">    .. seealso::</span>

<span class="sd">        - class :class:`py3dframe.FrameTransform` to represent a transformation between two frames of reference and convert points between the frames.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    translation : array_like, optional</span>
<span class="sd">        The translation vector between the parent frame and the frame to create in the selected convention.</span>
<span class="sd">        The translation vector is a 3-element vector and the default value is the zero vector.</span>

<span class="sd">    rotation: Rotation, optional</span>
<span class="sd">        The rotation between the parent frame and the frame to create in the selected convention.</span>
<span class="sd">        The rotation is a scipy.spatial.transform.Rotation object and the default value is the identity rotation.</span>

<span class="sd">    parent : Optional[Frame], optional</span>
<span class="sd">        If given, the frame will be defined relatively to this parent frame. Default is None - the global frame of :math:`\mathbb{R}^3`.</span>

<span class="sd">    setup_only : bool, optional</span>
<span class="sd">        If True, the parent frame will be used only to define the frame. Once the frame is created, its global position and orientation will be computed and the parent frame will be unlinked (set to None).</span>

<span class="sd">    convention : int, optional</span>
<span class="sd">        Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>
<span class="sd">    </span>
<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    TypeError</span>
<span class="sd">        If any of the parameters is wrong type.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;__R_dev&quot;</span><span class="p">,</span>
        <span class="s2">&quot;__T_dev&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_parent&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_convention&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">translation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">rotation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="o">*</span><span class="p">,</span>
            <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">setup_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Initialize a Canonical Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_matrix</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convention</span> <span class="o">=</span> <span class="n">convention</span>

        <span class="c1"># Update the frame with the given parameters</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">translation</span> <span class="k">if</span> <span class="n">translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span> <span class="k">if</span> <span class="n">rotation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">identity</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">setup_only</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_parent_dev</span><span class="p">()</span>

    <span class="c1"># ====================================================================================================================================</span>
    <span class="c1"># Developer methods</span>
    <span class="c1"># ====================================================================================================================================</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_R_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Getter and setter for the rotation object between the parent frame and this frame in the convention 0.</span>

<span class="sd">        The rotation is a scipy.spatial.transform.Rotation object. </span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        scipy.spatial.transform.Rotation</span>
<span class="sd">            The rotation between the parent frame and this frame in the convention 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__R_dev</span>
    
    <span class="nd">@_R_dev</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_R_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">R</span><span class="p">:</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The rotation must be a scipy.spatial.transform.Rotation object.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__R_dev</span> <span class="o">=</span> <span class="n">R</span>
    

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_T_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Getter and setter for the translation vector between the parent frame and this frame in the convention 0.</span>

<span class="sd">        The translation vector is a 3-element vector.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            The T_dev attribute is flags.writeable = False. To change the translation vector, use the setter.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The translation vector between the parent frame and this frame in the convention 0 with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">T_dev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__T_dev</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">T_dev</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">writeable</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">T_dev</span>
    
    <span class="nd">@_T_dev</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_T_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">T</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">T</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">T</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The translation must be finite.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__T_dev</span> <span class="o">=</span> <span class="n">T</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__T_dev</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">writeable</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_remove_parent_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove the parent frame of the frame by setting the parent attribute to None.</span>

<span class="sd">        The R and T of the frame are changed to the global R and T of the frame (with the removed parent).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">R_global</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">T_global</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span> <span class="o">=</span> <span class="n">R_global</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span> <span class="o">=</span> <span class="n">T_global</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_axes_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the axes to be a 3x3 matrix.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axes : Any</span>
<span class="sd">            The axes to format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The formatted axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">axes</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The axes must be a 3x3 matrix.&quot;</span><span class="p">)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">axes</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The axes must be finite.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">norm</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The basis vectors must not be 0.&quot;</span><span class="p">)</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span> <span class="o">/</span> <span class="n">norm</span>
        <span class="k">return</span> <span class="n">axes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_rotation_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rotation</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the rotation to be a scipy.spatial.transform.Rotation object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation : Any</span>
<span class="sd">            The rotation to format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        scipy.spatial.transform.Rotation</span>
<span class="sd">            The formatted rotation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The rotation must be a scipy.spatial.transform.Rotation object.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rotation</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_format_translation_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">translation</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the translation to be a 3x1 vector.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : Any</span>
<span class="sd">            The translation to format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The formatted translation with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">translation</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">translation</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The translation must be finite.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">translation</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_format_rotation_matrix_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_matrix</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the rotation matrix to be a 3x3 matrix.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_matrix : Any</span>
<span class="sd">            The rotation matrix to format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The formatted rotation matrix with shape (3, 3).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rotation_matrix</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The rotation matrix must be finite.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rotation_matrix</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The rotation matrix must be a 3x3 matrix.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_SO3</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The rotation matrix must be a special orthogonal matrix.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rotation_matrix</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_format_quaternion_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quaternion</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the quaternion to be a 4-element vector.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        quaternion : Any</span>
<span class="sd">            The quaternion to format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The formatted quaternion with shape (4,).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">quaternion</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">quaternion</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">quaternion</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The quaternion must be finite.&quot;</span><span class="p">)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">quaternion</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">norm</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The quaternion must not be 0.&quot;</span><span class="p">)</span>
        <span class="n">quaternion</span> <span class="o">=</span> <span class="n">quaternion</span> <span class="o">/</span> <span class="n">norm</span>
        <span class="k">return</span> <span class="n">quaternion</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_format_euler_angles_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the euler angles to be a 3-element vector.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        euler_angles : Any</span>
<span class="sd">            The euler angles to format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The formatted euler angles with shape (3,).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">euler_angles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">euler_angles</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">euler_angles</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The euler angles must be finite.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">euler_angles</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">_format_rotation_vector_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_vector</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the rotation vector to be a 3-element vector.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_vector : Any</span>
<span class="sd">            The rotation vector to format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The formatted rotation vector with shape (3,).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rotation_vector</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The rotation vector must be finite.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rotation_vector</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_convention_dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">allow_None</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the convention to be an integer between 0 and 7.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Any</span>
<span class="sd">            The convention to format.</span>

<span class="sd">        allow_None : bool, optional</span>
<span class="sd">            If True, None is allowed and will be converted to the current convention of the frame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The formatted convention.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">convention</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">allow_None</span><span class="p">:</span>
            <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convention</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The convention must be an integer.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">convention</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The convention must be an integer between 0 and 7.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">convention</span>


    <span class="c1"># ====================================================================================================================================</span>
    <span class="c1"># Class methods to create a Frame object</span>
    <span class="c1"># ====================================================================================================================================</span>
<div class="viewcode-block" id="Frame.canonical">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.canonical.html#py3dframe.Frame.canonical">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">canonical</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the canonical frame of reference of :math:`\mathbb{R}^3`.</span>

<span class="sd">        The canonical frame is defined by its origin at the zero vector and its basis vectors as the standard basis vectors.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        parent : Optional[Frame], optional</span>
<span class="sd">            The parent frame of the frame. Default is None - the global frame.</span>

<span class="sd">        convention : int, optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The canonical frame of reference of :math:`\mathbb{R}^3`.</span>
<span class="sd">        </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create the canonical frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            canonical_frame = Frame.canonical()</span>

<span class="sd">        The canonical frame is defined by its origin at the zero vector and its basis vectors as the standard basis vectors.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(&quot;Origin of the canonical frame:&quot;, canonical_frame.origin)</span>
<span class="sd">            print(&quot;X-axis of the canonical frame:&quot;, canonical_frame.x_axis)</span>
<span class="sd">            print(&quot;Y-axis of the canonical frame:&quot;, canonical_frame.y_axis)</span>
<span class="sd">            print(&quot;Z-axis of the canonical frame:&quot;, canonical_frame.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Origin of the canonical frame: [[0.] [0.] [0.]]</span>
<span class="sd">            # X-axis of the canonical frame: [[1.] [0.] [0.]]</span>
<span class="sd">            # Y-axis of the canonical frame: [[0.] [1.] [0.]]</span>
<span class="sd">            # Z-axis of the canonical frame: [[0.] [0.] [1.]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Frame.from_rotation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_rotation.html#py3dframe.Frame.from_rotation">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_rotation</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">translation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">setup_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Frame object from a rotation (:class:`Rotation`) and a translation.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - :class:`Rotation` class to create and manipulate rotations.</span>
<span class="sd">            - :meth:`from_rotation_matrix` method to create a Frame from a rotation matrix instead of a scipy Rotation object.</span>
<span class="sd">            - :meth:`from_quaternion` method to create a Frame from a quaternion instead of a scipy Rotation object.</span>
<span class="sd">            - :meth:`from_euler_angles` method to create a Frame from euler angles instead of a scipy Rotation object.</span>
<span class="sd">            - :meth:`from_rotation_vector` method to create a Frame from a rotation vector instead of a scipy Rotation object.</span>
<span class="sd">            - :meth:`from_axes` method to create a Frame from its axes (origin and basis vectors) instead of a rotation and a translation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray, optional</span>
<span class="sd">            The translation vector of the transformation. It must be a 3 elements vector with shape (3, 1). Default is None - the zero vector.</span>

<span class="sd">        rotation : Rotation, optional</span>
<span class="sd">            The rotation of the transformation. It must be a Rotation. Default is None - the identity rotation.</span>

<span class="sd">        parent : Optional[Frame], optional</span>
<span class="sd">            The parent frame of the frame. Default is None - the global frame.</span>

<span class="sd">        setup_only : bool, optional</span>
<span class="sd">            If True, the parent frame will be used only to define the frame and not to link the frames. Default is False.</span>

<span class="sd">        convention : int, optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object created from the given rotation and translation.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from a rotation and a translation.</span>

<span class="sd">        We want to create the frame defined by the following origin and basis vectors in the parent frame coordinates:</span>

<span class="sd">        - Origin: :math:`O_F = [-1, -2, -3]`</span>
<span class="sd">        - X-axis: :math:`\mathbf{e}_1 = [1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Y-axis: :math:`\mathbf{e}_2 = [-1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Z-axis: :math:`\mathbf{e}_3 = [0, 0, 1]`</span>

<span class="sd">        With convention 0, the frame is defined by the following formula:</span>

<span class="sd">        .. math::</span>

<span class="sd">            \mathbf{X}_E = \mathbf{R} \mathbf{X}_F + \mathbf{T}</span>

<span class="sd">        For :math:`\mathbf{X}_F = 0` we have :math:`\mathbf{X}_E = O_F = \mathbf{T}` so the translation vector is directly the origin of the frame in the parent frame coordinates.</span>
<span class="sd">        For :math:`\mathbf{X}_F = [1, 0, 0]` we have :math:`\mathbf{X}_E = \mathbf{e}_1` so the first column of the rotation matrix is the x-axis of the frame in the parent frame coordinates.</span>
<span class="sd">        For :math:`\mathbf{X}_F = [0, 1, 0]` we have :math:`\mathbf{X}_E = \mathbf{e}_2` so the second column of the rotation matrix is the y-axis of the frame in the parent frame coordinates.</span>
<span class="sd">        For :math:`\mathbf{X}_F = [0, 0, 1]` we have :math:`\mathbf{X}_E = \mathbf{e}_3` so the third column of the rotation matrix is the z-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        The frame can be created as follows:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame, Rotation</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            axes = numpy.column_stack((x_axis, y_axis, z_axis))</span>
<span class="sd">            R = Rotation.from_matrix(axes)</span>
<span class="sd">            t = origin</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_rotation(translation=t, rotation=R, convention=0, parent=parent)</span>

<span class="sd">            print(&quot;Origin of the frame:&quot;, frame.origin)</span>
<span class="sd">            print(&quot;X-axis of the frame:&quot;, frame.x_axis)</span>
<span class="sd">            print(&quot;Y-axis of the frame:&quot;, frame.y_axis)</span>
<span class="sd">            print(&quot;Z-axis of the frame:&quot;, frame.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Origin of the frame: [[-1.] [-2.] [-3.]]</span>
<span class="sd">            # X-axis of the frame: [[ 0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Y-axis of the frame: [[-0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Z-axis of the frame: [[0.] [0.] [1.]]</span>

<span class="sd">        If you like to work with a given convention you can specify it with the ``convention`` parameter.</span>
<span class="sd">        The translation and the rotation must be given in this convention to create the frame.</span>

<span class="sd">        You can also create the frame with convention 0 and then change the convention of the frame with the :attr`convention` attribute according to your preferences.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">setup_only</span><span class="o">=</span><span class="n">setup_only</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>



<div class="viewcode-block" id="Frame.from_axes">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_axes.html#py3dframe.Frame.from_axes">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_axes</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">origin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">x_axis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">y_axis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">z_axis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">setup_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Frame object from the given axes (origin and basis vectors).</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - :meth:`from_rotation` method to create a Frame from a rotation and a translation instead of its axes.</span>
<span class="sd">            - :meth:`from_rotation_matrix` method to create a Frame from a rotation matrix and a translation instead of its axes.</span>
<span class="sd">            - :meth:`from_quaternion` method to create a Frame from a quaternion and a translation instead of its axes.</span>
<span class="sd">            - :meth:`from_euler_angles` method to create a Frame from euler angles and a translation instead of its axes.</span>
<span class="sd">            - :meth:`from_rotation_vector` method to create a Frame from a rotation vector and a translation instead of its axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        origin : array_like, optional</span>
<span class="sd">            The coordinates of the origin of the frame in the parent frame coordinates. Default is None - the zero vector.</span>

<span class="sd">        x_axis : array_like, optional</span>
<span class="sd">            The x-axis of the frame in the parent frame coordinates. Default is None - the [1, 0, 0] vector.</span>

<span class="sd">        y_axis : array_like, optional</span>
<span class="sd">            The y-axis of the frame in the parent frame coordinates. Default is None - the [0, 1, 0] vector.</span>

<span class="sd">        z_axis : array_like, optional</span>
<span class="sd">            The z-axis of the frame in the parent frame coordinates. Default is None - the [0, 0, 1] vector.</span>

<span class="sd">        parent : Optional[Frame], optional</span>
<span class="sd">            The parent frame of the frame. Default is None - the global frame.</span>

<span class="sd">        setup_only : bool, optional</span>
<span class="sd">            If True, the parent frame will be used only to define the frame and not to link the frames. Default is False.</span>

<span class="sd">        convention : int, optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object created from the given axes.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from a given origin and basis vectors.</span>

<span class="sd">        We want to create the frame defined by the following origin and basis vectors in the parent frame coordinates:</span>

<span class="sd">        - Origin: :math:`O_F = [-1, -2, -3]`</span>
<span class="sd">        - X-axis: :math:`\mathbf{e}_1 = [1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Y-axis: :math:`\mathbf{e}_2 = [-1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Z-axis: :math:`\mathbf{e}_3 = [0, 0, 1]`</span>

<span class="sd">        The frame can be created as follows:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, parent=parent)</span>

<span class="sd">            print(&quot;Origin of the frame:&quot;, frame.origin)</span>
<span class="sd">            print(&quot;X-axis of the frame:&quot;, frame.x_axis)</span>
<span class="sd">            print(&quot;Y-axis of the frame:&quot;, frame.y_axis)</span>
<span class="sd">            print(&quot;Z-axis of the frame:&quot;, frame.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Origin of the frame: [[-1.] [-2.] [-3.]]</span>
<span class="sd">            # X-axis of the frame: [[ 0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Y-axis of the frame: [[-0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Z-axis of the frame: [[0.] [0.] [1.]]</span>

<span class="sd">        If you like to work with a given convention, you can specify it with the ``convention`` parameter in order to access the translation and rotation in this convention.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set default values</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">origin</span> <span class="k">if</span> <span class="n">origin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">x_axis</span> <span class="o">=</span> <span class="n">x_axis</span> <span class="k">if</span> <span class="n">x_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">y_axis</span> <span class="o">=</span> <span class="n">y_axis</span> <span class="k">if</span> <span class="n">y_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">z_axis</span> <span class="o">=</span> <span class="n">z_axis</span> <span class="k">if</span> <span class="n">z_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="c1"># Construct the frame</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">y_axis</span><span class="p">,</span> <span class="n">z_axis</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">canonical</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">origin</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="k">if</span> <span class="n">setup_only</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">_remove_parent_dev</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">instance</span></div>



<div class="viewcode-block" id="Frame.from_rotation_matrix">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_rotation_matrix.html#py3dframe.Frame.from_rotation_matrix">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_rotation_matrix</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">translation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">rotation_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">setup_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Frame object from a rotation matrix and translation.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - :meth:`from_rotation` method to create a Frame from a Rotation object instead of a rotation matrix.</span>
<span class="sd">            - :meth:`from_quaternion` method to create a Frame from a quaternion instead of a rotation matrix.</span>
<span class="sd">            - :meth:`from_euler_angles` method to create a Frame from euler angles instead of a rotation matrix.</span>
<span class="sd">            - :meth:`from_rotation_vector` method to create a Frame from a rotation vector instead of a rotation matrix.</span>
<span class="sd">            - :meth:`from_axes` method to create a Frame from its axes (origin and basis vectors) instead of a rotation matrix and a translation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray, optional</span>
<span class="sd">            The translation vector of the transformation. It must be a 3 elements vector with shape (3, 1). Default is None - the zero vector.</span>

<span class="sd">        rotation_matrix : numpy.ndarray, optional</span>
<span class="sd">            The rotation matrix of the transformation. It must be a 3x3 matrix. Default is None - the identity matrix.</span>

<span class="sd">        parent : Optional[Frame], optional</span>
<span class="sd">            The parent frame of the frame. Default is None - the global frame.</span>

<span class="sd">        setup_only : bool, optional</span>
<span class="sd">            If True, the parent frame will be used only to define the frame and not to link the frames. Default is False.</span>

<span class="sd">        convention : int, optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object created from the given rotation matrix and translation.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from a rotation matrix and a translation.</span>

<span class="sd">        We want to create the frame defined by the following origin and basis vectors in the parent frame coordinates:</span>

<span class="sd">        - Origin: :math:`O_F = [-1, -2, -3]`</span>
<span class="sd">        - X-axis: :math:`\mathbf{e}_1 = [1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Y-axis: :math:`\mathbf{e}_2 = [-1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Z-axis: :math:`\mathbf{e}_3 = [0, 0, 1]`</span>

<span class="sd">        With convention 0, the frame is defined by the following formula:</span>

<span class="sd">        .. math::</span>

<span class="sd">            \mathbf{X}_E = \mathbf{R} \mathbf{X}_F + \mathbf{T}</span>

<span class="sd">        For :math:`\mathbf{X}_F = 0` we have :math:`\mathbf{X}_E = O_F = \mathbf{T}` so the translation vector is directly the origin of the frame in the parent frame coordinates.</span>
<span class="sd">        For :math:`\mathbf{X}_F = [1, 0, 0]` we have :math:`\mathbf{X}_E = \mathbf{e}_1` so the first column of the rotation matrix is the x-axis of the frame in the parent frame coordinates.</span>
<span class="sd">        For :math:`\mathbf{X}_F = [0, 1, 0]` we have :math:`\mathbf{X}_E = \mathbf{e}_2` so the second column of the rotation matrix is the y-axis of the frame in the parent frame coordinates.</span>
<span class="sd">        For :math:`\mathbf{X}_F = [0, 0, 1]` we have :math:`\mathbf{X}_E = \mathbf{e}_3` so the third column of the rotation matrix is the z-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        The frame can be created as follows:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            axes = numpy.column_stack((x_axis, y_axis, z_axis))</span>
<span class="sd">            R = axes</span>
<span class="sd">            t = origin</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_rotation_matrix(translation=t, rotation_matrix=R, convention=0, parent=parent)</span>

<span class="sd">            print(&quot;Origin of the frame:&quot;, frame.origin)</span>
<span class="sd">            print(&quot;X-axis of the frame:&quot;, frame.x_axis)</span>
<span class="sd">            print(&quot;Y-axis of the frame:&quot;, frame.y_axis)</span>
<span class="sd">            print(&quot;Z-axis of the frame:&quot;, frame.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Origin of the frame: [[-1.] [-2.] [-3.]]</span>
<span class="sd">            # X-axis of the frame: [[ 0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Y-axis of the frame: [[-0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Z-axis of the frame: [[0.] [0.] [1.]]</span>

<span class="sd">        If you like to work with a given convention you can specify it with the ``convention`` parameter.</span>
<span class="sd">        The translation and the rotation matrix must be given in this convention to create the frame.</span>

<span class="sd">        You can also create the frame with convention 0 and then change the convention of the frame with the :attr`convention` attribute according to your preferences.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set default values</span>
        <span class="n">rotation_matrix</span> <span class="o">=</span> <span class="n">rotation_matrix</span> <span class="k">if</span> <span class="n">rotation_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">translation</span> <span class="k">if</span> <span class="n">translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="c1"># Construct the frame</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">canonical</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_rotation_matrix</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">setup_only</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">_remove_parent_dev</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">instance</span></div>

    

<div class="viewcode-block" id="Frame.from_quaternion">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_quaternion.html#py3dframe.Frame.from_quaternion">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_quaternion</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">translation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quaternion</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">setup_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">scalar_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Frame object from a quaternion and translation.</span>

<span class="sd">        The quaternion must be in the [w, x, y, z] format if ``scalar_first`` is True and in the [x, y, z, w] format if ``scalar_first`` is False.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - :meth:`from_rotation` method to create a Frame from a Rotation object instead of a quaternion.</span>
<span class="sd">            - :meth:`from_rotation_matrix` method to create a Frame from a rotation matrix instead of a quaternion.</span>
<span class="sd">            - :meth:`from_euler_angles` method to create a Frame from euler angles instead of a quaternion.</span>
<span class="sd">            - :meth:`from_rotation_vector` method to create a Frame from a rotation vector instead of a quaternion.</span>
<span class="sd">            - :meth:`from_axes` method to create a Frame from its axes (origin and basis vectors) instead of a quaternion and a translation</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray, optional</span>
<span class="sd">            The translation vector of the transformation. It must be a 3 elements vector with shape (3, 1). Default is None - the zero vector.</span>

<span class="sd">        quaternion : numpy.ndarray, optional</span>
<span class="sd">            The quaternion of the transformation. It must be a 4 elements vector [w, x, y, z] (scalar first convention). Default is None - the identity quaternion.</span>

<span class="sd">        parent : Optional[Frame], optional</span>
<span class="sd">            The parent frame of the frame. Default is None - the global frame.</span>

<span class="sd">        setup_only : bool, optional</span>
<span class="sd">            If True, the parent frame will be used only to define the frame and not to link the frames. Default is False.</span>

<span class="sd">        convention : int, optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>

<span class="sd">        scalar_first : bool, optional</span>
<span class="sd">            If True, the quaternion is in the [w, x, y, z] format. If False, the quaternion is in the [x, y, z, w] format. Default is True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object created from the given quaternion and translation.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from a quaternion and a translation.</span>

<span class="sd">        We want to create the frame defined by the following origin and basis vectors in the parent frame coordinates:</span>

<span class="sd">        - Origin: :math:`O_F = [-1, -2, -3]`</span>
<span class="sd">        - X-axis: :math:`\mathbf{e}_1 = [1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Y-axis: :math:`\mathbf{e}_2 = [-1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Z-axis: :math:`\mathbf{e}_3 = [0, 0, 1]`</span>

<span class="sd">        With convention 0, the frame is defined by the following formula:</span>

<span class="sd">        .. math::</span>

<span class="sd">            \mathbf{X}_E = \mathbf{R} \mathbf{X}_F + \mathbf{T}</span>

<span class="sd">        For :math:`\mathbf{X}_F = 0` we have :math:`\mathbf{X}_E = O_F = \mathbf{T}` so the translation vector is directly the origin of the frame in the parent frame coordinates.</span>
<span class="sd">        The rotation matrix corresponding to the basis vectors in the convention 0 can be described with quaternion :math:`q = [w, x, y, z] = [0.5 \sqrt{2 + \sqrt{2}}, 0, 0, \sqrt{2}/(4 w)]`.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            w = 0.5 * numpy.sqrt(2 + numpy.sqrt(2))</span>
<span class="sd">            z = numpy.sqrt(2) / (4 * w)</span>
<span class="sd">            quaternion = numpy.array([w, 0, 0, z]) # [w, x, y, z]</span>
<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            t = origin</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_quaternion(translation=t, quaternion=quaternion, convention=0, parent=parent)</span>

<span class="sd">            print(&quot;Origin of the frame:&quot;, frame.origin)</span>
<span class="sd">            print(&quot;X-axis of the frame:&quot;, frame.x_axis)</span>
<span class="sd">            print(&quot;Y-axis of the frame:&quot;, frame.y_axis)</span>
<span class="sd">            print(&quot;Z-axis of the frame:&quot;, frame.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Origin of the frame: [[-1.] [-2.] [-3.]]</span>
<span class="sd">            # X-axis of the frame: [[ 0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Y-axis of the frame: [[-0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Z-axis of the frame: [[0.] [0.] [1.]]</span>

<span class="sd">        If you like to work with a given convention you can specify it with the ``convention`` parameter.</span>
<span class="sd">        The translation and the quaternion must be given in this convention to create the frame.</span>

<span class="sd">        You can also create the frame with convention 0 and then change the convention of the frame with the :attr`convention` attribute according to your preferences.        </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set default values</span>
        <span class="n">quaternion</span> <span class="o">=</span> <span class="n">quaternion</span> <span class="k">if</span> <span class="n">quaternion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="c1"># Identity quaternion [w, x, y, z]</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">translation</span> <span class="k">if</span> <span class="n">translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="c1"># Construct the frame</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">canonical</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_quaternion</span><span class="p">(</span><span class="n">quaternion</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="n">scalar_first</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">setup_only</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">_remove_parent_dev</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">instance</span></div>

    

<div class="viewcode-block" id="Frame.from_euler_angles">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_euler_angles.html#py3dframe.Frame.from_euler_angles">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_euler_angles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">translation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">euler_angles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">setup_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">seq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;xyz&quot;</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Frame object from euler angles and translation.</span>

<span class="sd">        The euler angles allows to represent any rotation by a sequence of three elemental rotations around the axes of a coordinate system.</span>
<span class="sd">        The sequence of the rotations must be specified with the ``seq`` parameter.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - :meth:`from_rotation` method to create a Frame from a Rotation object instead of euler angles.</span>
<span class="sd">            - :meth:`from_rotation_matrix` method to create a Frame from a rotation matrix instead of euler angles.</span>
<span class="sd">            - :meth:`from_quaternion` method to create a Frame from a quaternion instead of euler angles.</span>
<span class="sd">            - :meth:`from_rotation_vector` method to create a Frame from a rotation vector instead of euler angles.</span>
<span class="sd">            - :meth:`from_axes` method to create a Frame from its axes (origin and basis vectors) instead of euler angles and a translation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray, optional</span>
<span class="sd">            The translation vector of the transformation. It must be a 3 elements vector with shape (3, 1). Default is None - the zero vector.</span>

<span class="sd">        euler_angles : numpy.ndarray, optional</span>
<span class="sd">            The euler angles of the transformation. It must be a 3 elements vector [alpha, beta, gamma] in radians with xyz convention. Default is None - the zero vector.</span>

<span class="sd">        parent : Optional[Frame], optional</span>
<span class="sd">            The parent frame of the frame. Default is None - the global frame.</span>

<span class="sd">        setup_only : bool, optional</span>
<span class="sd">            If True, the parent frame will be used only to define the frame and not to link the frames. Default is False.</span>

<span class="sd">        convention : int, optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the euler angles are in degrees. If False, the euler angles are in radians. Default is False.</span>

<span class="sd">        seq : str, optional</span>
<span class="sd">            The sequence of the euler angles. It must be a string of 3 characters chosen between &#39;x&#39;, &#39;y&#39;, and &#39;z&#39;. Default is &quot;xyz&quot;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object created from the given euler angles and translation.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from euler angles and a translation.</span>

<span class="sd">        We want to create the frame defined by the following origin and basis vectors in the parent frame coordinates:</span>

<span class="sd">        - Origin: :math:`O_F = [-1, -2, -3]`</span>
<span class="sd">        - X-axis: :math:`\mathbf{e}_1 = [1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Y-axis: :math:`\mathbf{e}_2 = [-1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Z-axis: :math:`\mathbf{e}_3 = [0, 0, 1]`</span>

<span class="sd">        With convention 0, the frame is defined by the following formula:</span>

<span class="sd">        .. math::</span>

<span class="sd">            \mathbf{X}_E = \mathbf{R} \mathbf{X}_F + \mathbf{T}</span>

<span class="sd">        For :math:`\mathbf{X}_F = 0` we have :math:`\mathbf{X}_E = O_F = \mathbf{T}` so the translation vector is directly the origin of the frame in the parent frame coordinates.</span>
<span class="sd">        The rotation matrix corresponding to the basis vectors in the convention 0 can be described with euler angles :math:`[\alpha, \beta, \gamma] = [0, 0, \pi/4]` in the &#39;xyz&#39; sequence.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            euler_angles = numpy.array([0, 0, numpy.pi/4]) # in radians</span>
<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            t = origin</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_euler_angles(translation=t, euler_angles=euler_angles, convention=0, parent=parent)</span>

<span class="sd">            print(&quot;Origin of the frame:&quot;, frame.origin)</span>
<span class="sd">            print(&quot;X-axis of the frame:&quot;, frame.x_axis)</span>
<span class="sd">            print(&quot;Y-axis of the frame:&quot;, frame.y_axis)</span>
<span class="sd">            print(&quot;Z-axis of the frame:&quot;, frame.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Origin of the frame: [[-1.] [-2.] [-3.]]</span>
<span class="sd">            # X-axis of the frame: [[ 0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Y-axis of the frame: [[-0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Z-axis of the frame: [[0.] [0.] [1.]]</span>

<span class="sd">        If you like to work with a given convention you can specify it with the ``convention`` parameter.</span>
<span class="sd">        The translation and the euler angles must be given in this convention to create the frame.</span>

<span class="sd">        You can also create the frame with convention 0 and then change the convention of the frame with the :attr`convention` attribute according to your preferences.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set default values</span>
        <span class="n">euler_angles</span> <span class="o">=</span> <span class="n">euler_angles</span> <span class="k">if</span> <span class="n">euler_angles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="c1"># Zero euler angles</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">translation</span> <span class="k">if</span> <span class="n">translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="c1"># Construct the frame</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">canonical</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_euler_angles</span><span class="p">(</span><span class="n">euler_angles</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">,</span> <span class="n">seq</span><span class="o">=</span><span class="n">seq</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">setup_only</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">_remove_parent_dev</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">instance</span></div>

    
    

<div class="viewcode-block" id="Frame.from_rotation_vector">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_rotation_vector.html#py3dframe.Frame.from_rotation_vector">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_rotation_vector</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">translation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">rotation_vector</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">setup_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Frame object from a rotation vector and translation.</span>

<span class="sd">        A rotation vector is a 3D vector that represents a rotation in 3D space. The direction of the vector indicates the axis of rotation, and the magnitude (length) of the vector indicates the angle of rotation in radians.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - :meth:`from_rotation` method to create a Frame from a Rotation object instead of a rotation vector.</span>
<span class="sd">            - :meth:`from_rotation_matrix` method to create a Frame from a rotation matrix instead of a rotation vector.</span>
<span class="sd">            - :meth:`from_quaternion` method to create a Frame from a quaternion instead of a rotation vector.</span>
<span class="sd">            - :meth:`from_euler_angles` method to create a Frame from euler angles instead of a rotation vector.</span>
<span class="sd">            - :meth:`from_axes` method to create a Frame from its axes (origin and basis vectors) instead of a rotation vector and a translation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray, optional</span>
<span class="sd">            The translation vector of the transformation. It must be a 3 elements vector with shape (3, 1). Default is None - the zero vector.</span>

<span class="sd">        rotation_vector : numpy.ndarray, optional</span>
<span class="sd">            The rotation vector of the transformation. It must be a 3 elements vector in radians. Default is None - the zero vector.</span>

<span class="sd">        parent : Optional[Frame], optional</span>
<span class="sd">            The parent frame of the frame. Default is None - the global frame.</span>

<span class="sd">        setup_only : bool, optional</span>
<span class="sd">            If True, the parent frame will be used only to define the frame and not to link the frames. Default is False.</span>

<span class="sd">        convention : int, optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation. Default is 0.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the rotation vector is in degrees. If False, the rotation vector is in radians. Default is False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object created from the given rotation vector and translation.</span>
<span class="sd">        </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from a rotation vector and a translation.</span>

<span class="sd">        We want to create the frame defined by the following origin and basis vectors in the parent frame coordinates:</span>

<span class="sd">        - Origin: :math:`O_F = [-1, -2, -3]`</span>
<span class="sd">        - X-axis: :math:`\mathbf{e}_1 = [1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Y-axis: :math:`\mathbf{e}_2 = [-1, 1, 0] / \sqrt{2}`</span>
<span class="sd">        - Z-axis: :math:`\mathbf{e}_3 = [0, 0, 1]`</span>

<span class="sd">        With convention 0, the frame is defined by the following formula:</span>

<span class="sd">        .. math::</span>

<span class="sd">            \mathbf{X}_E = \mathbf{R} \mathbf{X}_F + \mathbf{T}</span>

<span class="sd">        For :math:`\mathbf{X}_F = 0` we have :math:`\mathbf{X}_E = O_F = \mathbf{T}` so the translation vector is directly the origin of the frame in the parent frame coordinates.</span>
<span class="sd">        The rotation matrix corresponding to the basis vectors in the convention 0 can be described with rotation vector :math:`\mathbf{r} = [0, 0, \pi/4]`.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            rotation_vector = numpy.array([0, 0, numpy.pi/4]) # in radians</span>
<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            t = origin</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_rotation_vector(translation=t, rotation_vector=rotation_vector, convention=0, parent=parent)</span>

<span class="sd">            print(&quot;Origin of the frame:&quot;, frame.origin)</span>
<span class="sd">            print(&quot;X-axis of the frame:&quot;, frame.x_axis)</span>
<span class="sd">            print(&quot;Y-axis of the frame:&quot;, frame.y_axis)</span>
<span class="sd">            print(&quot;Z-axis of the frame:&quot;, frame.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Origin of the frame: [[-1.] [-2.] [-3.]]</span>
<span class="sd">            # X-axis of the frame: [[ 0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Y-axis of the frame: [[-0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Z-axis of the frame: [[0.] [0.] [1.]]</span>

<span class="sd">        If you like to work with a given convention you can specify it with the ``convention`` parameter.</span>
<span class="sd">        The translation and the rotation vector must be given in this convention to create the frame.</span>

<span class="sd">        You can also create the frame with convention 0 and then change the convention of the frame with the :attr`convention` attribute according to your preferences.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set default values</span>
        <span class="n">rotation_vector</span> <span class="o">=</span> <span class="n">rotation_vector</span> <span class="k">if</span> <span class="n">rotation_vector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="c1"># Zero rotation vector</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">translation</span> <span class="k">if</span> <span class="n">translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="c1"># Construct the frame</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">canonical</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set_rotation_vector</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">setup_only</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">_remove_parent_dev</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">instance</span></div>


    
    <span class="c1"># ====================================================================================================================================</span>
    <span class="c1"># User methods</span>
    <span class="c1"># ====================================================================================================================================</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">]:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The parent frame of this frame (by default the canonical frame if None).</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        The parent frame is used to define this frame relatively this parent frame.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            If you change the parent frame of a frame, the current transformation (translation and rotation) of the frame will be kept unchanged but the global transformation (global translation and global rotation) of the frame will change according to the new parent frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        parent : Optional[Frame]</span>
<span class="sd">            The parent frame in which the frame will be defined. If None, the frame will be defined in the global frame (the canonical frame).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[Frame]</span>
<span class="sd">            The parent frame of the frame. If None, the frame is defined in the global frame (the canonical frame).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        If the train moves and the person stays immobile in the train, the person axis will be unchanged relative to the train frame but will move relative to the global frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.origin = [10, 0, 0] # The train moves 10 units along the x-axis of the global frame.</span>

<span class="sd">            print(&quot;Person origin in the parent frame:&quot;, person.origin)</span>
<span class="sd">            # Output: Person origin in the parent frame: [[ 0.] [ 1.] [ 0.]]</span>

<span class="sd">            print(&quot;Person origin in the global frame:&quot;, person.global_origin)</span>
<span class="sd">            # Output: Person origin in the global frame: [[10.] [ 1.] [ 0.]]</span>

<span class="sd">        The parent frame allows to define a hierarchy of frames.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span>
    
    <span class="nd">@parent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Frame</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">Frame</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The parent must be a Frame object.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
    


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">convention</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The convention to express the transformation between the parent frame and this frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        The convention can be an integer between 0 and 7 corresponding to the conventions described in the table below:</span>

<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | Index               | Formula                                                        |</span>
<span class="sd">        +=====================+================================================================+</span>
<span class="sd">        | 0                   | :math:`\mathbf{X}_E = \mathbf{R} \mathbf{X}_F + \mathbf{T}`    |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | 1                   | :math:`\mathbf{X}_E = \mathbf{R} \mathbf{X}_F - \mathbf{T}`    |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | 2                   | :math:`\mathbf{X}_E = \mathbf{R} (\mathbf{X}_F + \mathbf{T})`  |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | 3                   | :math:`\mathbf{X}_E = \mathbf{R} (\mathbf{X}_F - \mathbf{T})`  |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | 4                   | :math:`\mathbf{X}_F = \mathbf{R} \mathbf{X}_E + \mathbf{T}`    |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | 5                   | :math:`\mathbf{X}_F = \mathbf{R} \mathbf{X}_E - \mathbf{T}`    |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | 6                   | :math:`\mathbf{X}_F = \mathbf{R} (\mathbf{X}_E + \mathbf{T})`  |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>
<span class="sd">        | 7                   | :math:`\mathbf{X}_F = \mathbf{R} (\mathbf{X}_E - \mathbf{T})`  |</span>
<span class="sd">        +---------------------+----------------------------------------------------------------+</span>

<span class="sd">        Where:</span>

<span class="sd">        - :math:`\mathbf{X}_E` is a point expressed in the parent frame coordinates.</span>
<span class="sd">        - :math:`\mathbf{X}_F` is the same point expressed in the frame coordinates.</span>
<span class="sd">        - :math:`\mathbf{R}` is the rotation matrix between the parent frame and this frame.</span>
<span class="sd">        - :math:`\mathbf{T}` is the translation vector between the parent frame and this frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            The default convention is 0.</span>

<span class="sd">        This can be useful when working with different libraries or applications that use different conventions for representing 3D transformations (as OPENCV, OPENGL, ROS, ...).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : int</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention to express the transformation between the parent frame and this frame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The convention parameter.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame with given axes and origin with the default convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, convention=0)</span>

<span class="sd">        If an application uses another convention, you can access the translation and rotation in this convention by changing the convention of the frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            frame.convention = 4 # Change the convention of the frame to convention 4.</span>

<span class="sd">            print(&quot;Rotation matrix in convention 4:&quot;, frame.rotation_matrix)</span>

<span class="sd">        The rotation returned is the rotation between the parent frame and this frame in convention 4.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convention</span>
    
    <span class="nd">@convention</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">convention</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_convention_dev</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="n">allow_None</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_convention</span> <span class="o">=</span> <span class="n">convention</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The origin of the frame relative to the parent frame.</span>

<span class="sd">        The origin is a 3 elements vector with shape (3, 1) representing the coordinates of the origin of the frame in the parent frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :meth:`global_origin` to access the origin of the frame in the global frame coordinates.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        origin : numpy.ndarray</span>
<span class="sd">            The origin of the frame in the parent frame coordinates as an array-like with 3 elements.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The origin of the frame in the parent frame coordinates with shape (3, 1).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="nd">@origin</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">axes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The basis vectors of the frame relative to the parent frame.</span>

<span class="sd">        The axes is a 3x3 matrix with shape (3, 3) representing the basis vectors of the frame in the parent frame coordinates.</span>
<span class="sd">        The first column is the x-axis, the second column is the y-axis and the third column is the z-axis.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`x_axis` to access the x-axis of the frame.</span>
<span class="sd">            - attribute :attr:`y_axis` to access the y-axis of the frame.</span>
<span class="sd">            - attribute :attr:`z_axis` to access the z-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_axes` to access the basis vectors of the frame in the global frame coordinates.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axes : numpy.ndarray</span>
<span class="sd">            The basis vectors of the frame in the parent frame coordinates as an array-like with shape (3, 3).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The basis vectors of the frame in the parent frame coordinates with shape (3, 3).</span>

<span class="sd">        </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        Lets define the axes of a frame.</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            frame = Frame.canonical()</span>

<span class="sd">            # Define the axes of the frame (Axes will be normalized)</span>
<span class="sd">            x_axis = numpy.array([1, 0, 0])</span>
<span class="sd">            y_axis = numpy.array([0, 2, 0])</span>
<span class="sd">            z_axis = numpy.array([0, 0, 3])</span>

<span class="sd">            axes = numpy.column_stack((x_axis, y_axis, z_axis))</span>
<span class="sd">            frame.axes = axes</span>
<span class="sd">            print(&quot;Axes of the frame:&quot;, frame.axes)</span>
<span class="sd">            # Output: Axes of the frame: [[1. 0. 0.]</span>
<span class="sd">            #                          [0. 1. 0.]</span>
<span class="sd">            #                          [0. 0. 1.]]    </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation_matrix</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="nd">@axes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_axes_dev</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation_matrix</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">x_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The x-axis of the frame relative to the parent frame.</span>

<span class="sd">        The x-axis is a 3 elements vector with shape (3, 1) representing the coordinates of the x-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is not settable. To change the x-axis, use the :attr:`axes` attribute.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`y_axis` to access the y-axis of the frame.</span>
<span class="sd">            - attribute :attr:`z_axis` to access the z-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_x_axis` to access the x-axis of the frame in the global frame coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The x-axis of the frame in the parent frame coordinates with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x_axis</span>
    

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">y_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The y-axis of the frame relative to the parent frame.</span>

<span class="sd">        The y-axis is a 3 elements vector with shape (3, 1) representing the coordinates of the y-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is not settable. To change the y-axis, use the :attr:`axes` attribute.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`x_axis` to access the x-axis of the frame.</span>
<span class="sd">            - attribute :attr:`z_axis` to access the z-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_y_axis` to access the y-axis of the frame in the global frame coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The y-axis of the frame in the parent frame coordinates with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">y_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">y_axis</span>
    

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">z_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The z-axis of the frame relative to the parent frame.</span>

<span class="sd">        The z-axis is a 3 elements vector with shape (3, 1) representing the coordinates of the z-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is not settable. To change the z-axis, use the :attr:`axes` attribute.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`x_axis` to access the x-axis of the frame.</span>
<span class="sd">            - attribute :attr:`y_axis` to access the y-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_z_axis` to access the z-axis of the frame in the global frame coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The z-axis of the frame in the parent frame coordinates with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">z_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">z_axis</span>


<div class="viewcode-block" id="Frame.get_rotation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_rotation.html#py3dframe.Frame.get_rotation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The rotation is returned as a :class:`Rotation` object.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`rotation` to get or set the rotation in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_rotation` to set the rotation in a specific convention.</span>
<span class="sd">            - method :meth:`get_global_rotation` to get the rotation between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Rotation</span>
<span class="sd">            The rotation between the parent frame and this frame in the given convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from its axes and origin with the default convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, convention=0, parent=parent)</span>

<span class="sd">        If an application using an other convention required the rotation in the convention 4, you can access the rotation in this convention with the :meth:`get_rotation` method.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            rotation_convention_4 = frame.get_rotation(convention=4)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_convention_dev</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="n">allow_None</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">R</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">convention</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">R</span></div>

    
<div class="viewcode-block" id="Frame.set_rotation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_rotation.html#py3dframe.Frame.set_rotation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">:</span> <span class="n">Rotation</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The rotation must be given as a :class:`Rotation` object.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`rotation` to get or set the rotation in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_rotation` to get the rotation in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_rotation` to set the rotation between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation : Rotation</span>
<span class="sd">            The rotation between the parent frame and this frame in the given convention.</span>
<span class="sd">        </span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a default frame with convention 0.</span>

<span class="sd">        .. code-block:: python  </span>

<span class="sd">            from py3dframe import Frame</span>
<span class="sd">        </span>
<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.canonical(convention=0, parent=parent)</span>

<span class="sd">        Lets assume, an application uses convention 4 to represent the transformation between two frames.</span>
<span class="sd">        The frame of reference of the application rotates and the new rotation between the parent frame and this frame in convention 4 can be extracted from the application.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Rotation</span>

<span class="sd">            rotation = Rotation.from_matrix(...) # Extract the rotation matrix from the application.</span>

<span class="sd">            frame.set_rotation(rotation, convention=4) # Set the rotation in convention 4.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_convention_dev</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="n">allow_None</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_rotation_dev</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">current_T</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">convention</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">current_T</span><span class="p">,</span> <span class="n">convention</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rotation</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The rotation between the parent frame and this frame in the convention of the frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :attr:`get_rotation` to get the rotation in a specific convention.</span>
<span class="sd">            - method :meth:`set_rotation` to set the rotation in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation : Rotation</span>
<span class="sd">            The rotation between the parent frame and this frame in the convention of the frame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Rotation</span>
<span class="sd">            The rotation between the parent frame and this frame in the convention of the frame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>
    
    <span class="nd">@rotation</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">:</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>
    

<div class="viewcode-block" id="Frame.get_translation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_translation.html#py3dframe.Frame.get_translation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_translation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the translation vector between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The translation vector is returned as a numpy array with shape (3, 1).</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`translation` to get or set the translation in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_translation` to set the translation in a specific convention.</span>
<span class="sd">            - method :meth:`get_global_translation` to get the translation between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The translation vector between the parent frame and this frame in the given convention with shape (3, 1).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from its axes and origin with the default convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, convention=0, parent=parent)</span>

<span class="sd">        If an application using an other convention required the translation in the convention 4, you can access the translation in this convention with the :meth:`get_translation` method.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            translation_convention_4 = frame.get_translation(convention=4)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_convention_dev</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="n">allow_None</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">T</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">convention</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">T</span></div>

    
<div class="viewcode-block" id="Frame.set_translation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_translation.html#py3dframe.Frame.set_translation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_translation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">translation</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the translation vector between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The translation vector must be given as a array-like with 3 elements.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`translation` to get or set the translation in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_translation` to get the translation in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_translation` to set the translation between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray</span>
<span class="sd">            The translation vector between the parent frame and this frame in the given convention as an array-like with 3 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a default frame with convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.canonical(convention=0, parent=parent)</span>

<span class="sd">        Lets assume, an application uses convention 4 to represent the transformation between two frames.</span>
<span class="sd">        The frame of reference of the application moves and the new translation vector between the parent frame and this frame in convention 4 can be extracted from the application.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            translation = numpy.array(...) # Extract the translation vector from the application.</span>

<span class="sd">            frame.set_translation(translation, convention=4) # Set the translation in convention 4.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_convention_dev</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="n">allow_None</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_translation_dev</span><span class="p">(</span><span class="n">translation</span><span class="p">)</span>
        <span class="n">current_R</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">convention</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="n">current_R</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">translation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The translation vector between the parent frame and this frame in the convention of the frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_translation` to get the translation in a specific convention.</span>
<span class="sd">            - method :meth:`set_translation` to set the translation in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray</span>
<span class="sd">            The translation vector between the parent frame and this frame in the convention of the frame as an array-like with 3 elements.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The translation vector between the parent frame and this frame in the convention of the frame with shape (3, 1).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>
    
    <span class="nd">@translation</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">translation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">translation</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>
    

<div class="viewcode-block" id="Frame.get_rotation_matrix">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_rotation_matrix.html#py3dframe.Frame.get_rotation_matrix">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the rotation matrix between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The rotation matrix is returned as a numpy array with shape (3, 3).</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`rotation_matrix` to get or set the rotation matrix in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_rotation_matrix` to set the rotation matrix in a specific convention.</span>
<span class="sd">            - method :meth:`get_global_rotation_matrix` to get the rotation matrix between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation matrix between the parent frame and this frame in the given convention with shape (3, 3).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from its axes and origin with the default convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, convention=0, parent=parent)</span>

<span class="sd">        If an application using an other convention required the rotation matrix in the convention 4, you can access the rotation matrix in this convention with the :meth:`get_rotation_matrix` method.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            rotation_matrix_convention_4 = frame.get_rotation_matrix(convention=4)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="Frame.set_rotation_matrix">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_rotation_matrix.html#py3dframe.Frame.set_rotation_matrix">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation matrix between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The rotation matrix must be given as a array-like with shape (3, 3).</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`rotation_matrix` to get or set the rotation matrix in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_rotation_matrix` to get the rotation matrix in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_rotation_matrix` to set the rotation matrix between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_matrix : numpy.ndarray</span>
<span class="sd">            The rotation matrix between the parent frame and this frame in the given convention as an array-like with shape (3, 3).</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a default frame with convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.canonical(convention=0, parent=parent)</span>

<span class="sd">        Lets assume, an application uses convention 4 to represent the transformation between two frames.</span>
<span class="sd">        The frame of reference of the application rotates and the new rotation matrix between the parent frame and this frame in convention 4 can be extracted from the application.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            rotation_matrix = numpy.array(...) # Extract the rotation matrix from the application.</span>

<span class="sd">            frame.set_rotation_matrix(rotation_matrix, convention=4) # Set the rotation matrix in convention 4.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rotation_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_rotation_matrix_dev</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_matrix</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The rotation matrix between the parent frame and this frame in the convention of the frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_rotation_matrix` to get the rotation matrix in a specific convention.</span>
<span class="sd">            - method :meth:`set_rotation_matrix` to set the rotation matrix in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_matrix : numpy.ndarray</span>
<span class="sd">            The rotation matrix between the parent frame and this frame in the convention of the frame as an array-like with shape (3, 3).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation matrix between the parent frame and this frame in the convention of the frame with shape (3, 3).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation_matrix</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>

    <span class="nd">@rotation_matrix</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation_matrix</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>



<div class="viewcode-block" id="Frame.get_quaternion">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_quaternion.html#py3dframe.Frame.get_quaternion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scalar_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the quaternion representation of the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The quaternion is returned as a numpy array with shape (4,) in the scalar first [w, x, y, z] or scalar last [x, y, z, w] convention.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`quaternion` to get or set the quaternion in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_quaternion` to set the quaternion in a specific convention.</span>
<span class="sd">            - method :meth:`get_global_quaternion` to get the quaternion between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        scalar_first : bool, optional</span>
<span class="sd">            If True, the quaternion is in the scalar first convention. Default is True. If False, the quaternion is in the scalar last convention.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The quaternion between the parent frame and this frame in the given convention with shape (4,).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from its axes and origin with the default convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, convention=0, parent=parent)</span>

<span class="sd">        If an application using an other convention required the quaternion in the convention 4 with scalar first convention, you can access the quaternion in this convention with the :meth:`get_quaternion` method.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            quaternion_convention_4 = frame.get_quaternion(convention=4, scalar_first=True)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar_first</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The scalar_first parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span><span class="o">.</span><span class="n">as_quat</span><span class="p">(</span><span class="n">scalar_first</span><span class="o">=</span><span class="n">scalar_first</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Frame.set_quaternion">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_quaternion.html#py3dframe.Frame.set_quaternion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quaternion</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scalar_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the quaternion representation of the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The quaternion must be given as a array-like with 4 elements in the scalar first [w, x, y, z] or scalar last [x, y, z, w] convention.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`quaternion` to get or set the quaternion in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_quaternion` to get the quaternion in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_quaternion` to set the quaternion between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        quaternion : numpy.ndarray</span>
<span class="sd">            The quaternion between the parent frame and this frame in the given convention as an array-like with 4 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        scalar_first : bool, optional</span>
<span class="sd">            If True, the quaternion is in the scalar first convention. Default is True. If False, the quaternion is in the scalar last convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a default frame with convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.canonical(convention=0, parent=parent)</span>

<span class="sd">        Lets assume, an application uses convention 4 to represent the transformation between two frames.</span>
<span class="sd">        The frame of reference of the application rotates and the new quaternion between the parent frame and this frame in convention 4 with scalar first convention can be extracted from the application.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            quaternion = numpy.array(...) # Extract the quaternion from the application.</span>

<span class="sd">            frame.set_quaternion(quaternion, convention=4, scalar_first=True) # Set the quaternion in convention 4 with scalar first convention.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar_first</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The scalar_first parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="n">quaternion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_quaternion_dev</span><span class="p">(</span><span class="n">quaternion</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_quat</span><span class="p">(</span><span class="n">quaternion</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="n">scalar_first</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>

    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The quaternion representation of the rotation between the parent frame and this frame in the convention of the frame.</span>

<span class="sd">        The quaternion is in the scalar first convention [w, x, y, z].</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_quaternion` to get the quaternion in a specific convention and order.</span>
<span class="sd">            - method :meth:`set_quaternion` to set the quaternion in a specific convention and order.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        quaternion : numpy.ndarray</span>
<span class="sd">            The quaternion between the parent frame and this frame in the convention of the frame as an array-like with 4 elements. The quaternion is in the scalar first convention [w, x, y, z].</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The quaternion between the parent frame and this frame in the convention of the frame with shape (4,). The quaternion is in the scalar first convention [w, x, y, z].</span>
<span class="sd">       </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_quaternion</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="nd">@quaternion</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quaternion</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_quaternion</span><span class="p">(</span><span class="n">quaternion</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    
<div class="viewcode-block" id="Frame.get_euler_angles">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_euler_angles.html#py3dframe.Frame.get_euler_angles">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;xyz&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the Euler angles representation of the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The Euler angles describe the rotation using three elementary rotations about specified axes. </span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`euler_angles` to get or set the Euler angles in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_euler_angles` to set the Euler angles in a specific convention.</span>
<span class="sd">            - method :meth:`get_global_euler_angles` to get the Euler angles between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the Euler angles are returned in degrees. Default is False (radians).</span>

<span class="sd">        seq : str, optional</span>
<span class="sd">            The axes of the Euler angles. Default is &quot;xyz&quot;. It must be a string of 3 characters chosen among &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The Euler angles between the parent frame and this frame in the given convention with shape (3,).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from its axes and origin with the default convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, convention=0, parent=parent)</span>

<span class="sd">        If an application using an other convention required the Euler angles in the convention 4 with &#39;ZYX&#39; sequence in degrees, you can access the Euler angles in this convention with the :meth:`get_euler_angles` method.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            euler_angles_convention_4 = frame.get_euler_angles(convention=4, degrees=True, seq=&#39;ZYX&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The degrees parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The seq parameter must be a string.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The seq parameter must have 3 characters.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">s</span> <span class="ow">in</span> <span class="s1">&#39;XYZxyz&#39;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The seq must contain only the characters &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;.&quot;</span><span class="p">)</span> 
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span><span class="o">.</span><span class="n">as_euler</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Frame.set_euler_angles">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_euler_angles.html#py3dframe.Frame.set_euler_angles">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;xyz&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Euler angles representation of the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The Euler angles describe the rotation using three elementary rotations about specified axes.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`euler_angles` to get or set the Euler angles in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_euler_angles` to get the Euler angles in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_euler_angles` to set the Euler angles between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        euler_angles : numpy.ndarray</span>
<span class="sd">            The Euler angles between the parent frame and this frame in the given convention as an array-like with 3 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the Euler angles are in degrees. Default is False (radians).</span>

<span class="sd">        seq : str, optional</span>
<span class="sd">            The axes of the Euler angles. Default is &quot;xyz&quot;. It must be a string of 3 characters chosen among &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a default frame with convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.canonical(convention=0, parent=parent)</span>
<span class="sd">        </span>
<span class="sd">        Lets assume, an application uses convention 4 to represent the transformation between two frames.</span>
<span class="sd">        The frame of reference of the application rotates and the new Euler angles between the parent frame and this frame in convention 4 with &#39;ZYX&#39; sequence in degrees can be extracted from the application.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            euler_angles = numpy.array(...) # Extract the Euler angles from the application.</span>

<span class="sd">            frame.set_euler_angles(euler_angles, convention=4, degrees=True, seq=&#39;ZYX&#39;) # Set the Euler angles in convention 4 with &#39;ZYX&#39; sequence in degrees.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The degrees parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The seq parameter must be a string.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The seq parameter must have 3 characters.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">s</span> <span class="ow">in</span> <span class="s1">&#39;XYZxyz&#39;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The seq must contain only the characters &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;.&quot;</span><span class="p">)</span> 
        <span class="n">euler_angles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_euler_angles_dev</span><span class="p">(</span><span class="n">euler_angles</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_euler</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The Euler angles representation of the rotation between the parent frame and this frame in the convention of the frame.</span>

<span class="sd">        The Euler angles are in radians and the sequence is &#39;xyz&#39;.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_euler_angles` to get the Euler angles in a specific convention, sequence and unit.</span>
<span class="sd">            - method :meth:`set_euler_angles` to set the Euler angles in a specific convention, sequence and unit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        euler_angles : numpy.ndarray</span>
<span class="sd">            The Euler angles between the parent frame and this frame in the convention of the frame with shape (3,). The angles are in radians and the sequence is &#39;xyz&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The Euler angles between the parent frame and this frame in the convention of the frame with shape (3,). The angles are in radians and the sequence is &#39;xyz&#39;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_euler_angles</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span>

    <span class="nd">@euler_angles</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_euler_angles</span><span class="p">(</span><span class="n">euler_angles</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span>



<div class="viewcode-block" id="Frame.get_rotation_vector">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_rotation_vector.html#py3dframe.Frame.get_rotation_vector">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the rotation vector representation of the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The rotation vector describes the rotation by a single rotation about a fixed axis. The direction of the axis is given by the direction of the vector, and the magnitude of the vector is given by the angle of rotation.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`rotation_vector` to get or set the rotation vector in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_rotation_vector` to set the rotation vector in a specific convention.</span>
<span class="sd">            - method :meth:`get_global_rotation_vector` to get the rotation vector between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the rotation vector is returned in degrees. Default is False (radians).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation vector between the parent frame and this frame in the given convention with shape (3,).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a frame from its axes and origin with the default convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>
<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            origin = numpy.array([-1, -2, -3])</span>
<span class="sd">            x_axis = numpy.array([1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            y_axis = numpy.array([-1, 1, 0]) / numpy.sqrt(2)</span>
<span class="sd">            z_axis = numpy.array([0, 0, 1])</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.from_axes(origin=origin, x_axis=x_axis, y_axis=y_axis, z_axis=z_axis, convention=0, parent=parent)</span>

<span class="sd">        If an application using an other convention required the rotation vector in the convention 4 in degrees, you can access the rotation vector in this convention with the :meth:`get_rotation_vector` method.</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            rotation_vector_convention_4 = frame.get_rotation_vector(convention=4, degrees=True)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The degrees parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span><span class="o">.</span><span class="n">as_rotvec</span><span class="p">(</span><span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span></div>


<div class="viewcode-block" id="Frame.set_rotation_vector">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_rotation_vector.html#py3dframe.Frame.set_rotation_vector">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_vector</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation vector representation of the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        The rotation vector describes the rotation by a single rotation about a fixed axis. The direction of the axis is given by the direction of the vector, and the magnitude of the vector is given by the angle of rotation.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`rotation_vector` to get or set the rotation vector in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_rotation_vector` to get the rotation vector in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_rotation_vector` to set the rotation vector between the global frame and this frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_vector : numpy.ndarray</span>
<span class="sd">            The rotation vector between the parent frame and this frame in the given convention as an array-like with 3 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the rotation vector is in degrees. Default is False (radians).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets create a default frame with convention 0.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            parent = ... # Define the parent frame if needed, otherwise parent=None to use the canonical frame.</span>

<span class="sd">            frame = Frame.canonical(convention=0, parent=parent)</span>

<span class="sd">        Lets assume, an application uses convention 4 to represent the transformation between two frames.</span>
<span class="sd">        The frame of reference of the application rotates and the new rotation vector between the parent frame and this frame in convention 4 in degrees can be extracted from the application.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            rotation_vector = numpy.array(...) # Extract the rotation vector from the application.</span>

<span class="sd">            frame.set_rotation_vector(rotation_vector, convention=4, degrees=True) # Set the rotation vector in convention 4 in degrees.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The degrees parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="n">rotation_vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_rotation_vector_dev</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>

    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The rotation vector representation of the rotation between the parent frame and this frame in the convention of the frame.</span>

<span class="sd">        The rotation vector is in radians.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_rotation_vector` to get the rotation vector in a specific convention and unit.</span>
<span class="sd">            - method :meth:`set_rotation_vector` to set the rotation vector in a specific convention and unit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_vector : numpy.ndarray</span>
<span class="sd">            The rotation vector between the parent frame and this frame in the convention of the frame with shape (3,). The rotation vector is in radians.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation vector between the parent frame and this frame in the convention of the frame with shape (3,). The rotation vector is in radians.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation_vector</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="nd">@rotation_vector</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_vector</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation_vector</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>



    <span class="c1"># ====================================================================================================================================</span>
    <span class="c1"># Global transformation methods</span>
    <span class="c1"># ====================================================================================================================================</span>
<div class="viewcode-block" id="Frame.get_global_frame">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_global_frame.html#py3dframe.Frame.get_global_frame">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the global frame of the frame. The representation of the frame with respect to the global canonical frame.</span>

<span class="sd">        If the frame has no parent, the global frame is the frame itself.</span>

<span class="sd">        Otherwise, the global frame is computed by composing the transformation between the global frame and the parent frame with the transformation between the parent frame and this frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            The parent attribute of the global frame is None.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            The Frame object is a new object. Any change in the returned object will not affect the original object.</span>
<span class="sd">            Furthermore, any change in the original object will not affect the returned object.</span>
<span class="sd">            It describes the frame at the state of the call.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The global frame of the frame.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves and the person moves inside the train.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">            person.set_translation([0, 2, 0], convention=0) # The person moves by 1 unit along the y axis of the train frame.</span>
<span class="sd">            person.set_euler_angles([0, 0, 45], convention=0, degrees=True) # The person rotates of 45 degrees around the z axis of the train frame.</span>

<span class="sd">        We can determine the orientation and position of the person relative to the global frame at any time using the :meth:`get_global_frame` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            global_person = person.get_global_frame() # Get the global frame of the person.</span>

<span class="sd">            print(&quot;Person origin in the global frame:&quot;, global_person.origin)</span>
<span class="sd">            print(&quot;Person x axis in the global frame:&quot;, global_person.x_axis)</span>
<span class="sd">            print(&quot;Person y axis in the global frame:&quot;, global_person.y_axis)</span>
<span class="sd">            print(&quot;Person z axis in the global frame:&quot;, global_person.z_axis)</span>
<span class="sd">            # Output:</span>
<span class="sd">            # Person origin in the global frame: [[10] [2] [0]]</span>
<span class="sd">            # Person x axis in the global frame: [[ 0.70710678] [ 0.70710678] [ 0.        ]]</span>
<span class="sd">            # Person y axis in the global frame: [[-0.70710678] [ 0.70710678] [0.        ]]</span>
<span class="sd">            # Person z axis in the global frame: [[0.] [0.] [1.]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Construct the composite transformation between the global frame and this frame.</span>
            <span class="n">R_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">T_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">get_global_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

            <span class="c1"># ====================================================================================================================================</span>
            <span class="c1"># Lets note : </span>
            <span class="c1"># Xg : the coordinates of a point in the global frame</span>
            <span class="c1"># Xp : the coordinates of the same point in the parent frame</span>
            <span class="c1"># Xf : the coordinates of the same point in the frame</span>
            <span class="c1"># Rg : the rotation matrix between the global frame and the parent frame</span>
            <span class="c1"># Rp : the rotation matrix between the parent frame and this frame</span>
            <span class="c1"># Tg : the translation vector between the global frame and the parent frame</span>
            <span class="c1"># Tp : the translation vector between the parent frame and this frame</span>
            <span class="c1"># R : the rotation matrix between the global frame and this frame</span>
            <span class="c1"># T : the translation vector between the global frame and this frame</span>
            <span class="c1"># </span>
            <span class="c1"># We have :</span>
            <span class="c1"># Xg = Rg * Xp + Tg</span>
            <span class="c1"># Xp = Rp * Xf + Tp</span>
            <span class="c1"># Xg = R * Xf + T</span>
            <span class="c1">#</span>
            <span class="c1"># We search R and T:</span>
            <span class="c1"># Xg = Rg * (Rp * Xf + Tp) + Tg</span>
            <span class="c1"># Xg = Rg * Rp * Xf + Rg * Tp + Tg</span>
            <span class="c1">#</span>
            <span class="c1"># So the composite transformation is R = Rg * Rp and T = Rg * Tp + Tg</span>
            <span class="c1"># ====================================================================================================================================</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">R_parent</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span>
            <span class="n">translation</span> <span class="o">=</span> <span class="n">R_parent</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">T</span> <span class="o">+</span> <span class="n">T_parent</span>
            <span class="n">global_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">from_rotation</span><span class="p">(</span><span class="n">translation</span><span class="o">=</span><span class="n">translation</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">global_frame</span><span class="o">.</span><span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convention</span>

        <span class="k">return</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

    

<div class="viewcode-block" id="Frame.get_global_rotation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_global_rotation.html#py3dframe.Frame.get_global_rotation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The rotation is returned as a :class:`Rotation` object.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_rotation` to get or set the rotation between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_global_rotation` to set the rotation between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`get_rotation` to get the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Rotation</span>
<span class="sd">            The rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves and the person moves inside the train.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">            person.set_translation([0, 2, 0], convention=0) # The person moves by 1 unit along the y axis of the train frame.</span>
<span class="sd">            person.set_euler_angles([0, 0, 45], convention=0, degrees=True) # The person rotates of 45 degrees around the z axis of the train frame.</span>

<span class="sd">        If an application using an other convention required the rotation between the global frame and the person frame in the convention 4, you can access this rotation with the :meth:`get_global_rotation` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            global_rotation_person = person.get_global_rotation(convention=4) # Get the rotation between the global frame and the person frame in convention 4.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>



<div class="viewcode-block" id="Frame.set_global_rotation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_global_rotation.html#py3dframe.Frame.set_global_rotation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">:</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The rotation must be given as a :class:`Rotation` object.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_rotation` to get or set the rotation between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_rotation` to get the rotation between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`set_rotation` to set the rotation between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation : Rotation</span>
<span class="sd">            The rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>
<span class="sd">        </span>
<span class="sd">        Lets assume the train moves.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">        If an application using an other convention gives the new rotation between the global frame and the person frame in the convention 4, you can set this rotation with the :meth:`set_global_rotation` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            rotation = ... # Get the new rotation between the global frame and the person frame in convention 4 from the application.</span>

<span class="sd">            person.set_global_rotation(rotation, convention=4) # Set the rotation between the global frame and the person frame in convention 4.</span>

<span class="sd">        The person frame is updated accordingly to keep the correct transformation between the global frame and the person frame.</span>

<span class="sd">        Then we can determine the new orientation and position of the person relative to the train frame:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(&quot;Person origin in the train frame:&quot;, person.origin)</span>
<span class="sd">            print(&quot;Person axes in the train frame:&quot;, person.axes)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="c1"># ====================================================================================================================================</span>
        <span class="c1"># Lets note : </span>
        <span class="c1"># Xg : the coordinates of a point in the global frame</span>
        <span class="c1"># Xp : the coordinates of the same point in the parent frame</span>
        <span class="c1"># Xf : the coordinates of the same point in the frame</span>
        <span class="c1"># Rg : the rotation matrix between the global frame and the parent frame</span>
        <span class="c1"># Rp : the rotation matrix between the parent frame and this frame</span>
        <span class="c1"># Tg : the translation vector between the global frame and the parent frame</span>
        <span class="c1"># Tp : the translation vector between the parent frame and this frame</span>
        <span class="c1"># R : the rotation matrix between the global frame and this frame</span>
        <span class="c1"># T : the translation vector between the global frame and this frame</span>
        <span class="c1"># </span>
        <span class="c1"># We have :</span>
        <span class="c1"># Xg = Rg * Xp + Tg</span>
        <span class="c1"># Xp = Rp * Xf + Tp</span>
        <span class="c1"># Xg = R * Xf + T</span>
        <span class="c1">#</span>
        <span class="c1"># We search Rp:</span>
        <span class="c1"># Xg = Rg * (Rp * Xf + Tp) + Tg</span>
        <span class="c1"># Xg = Rg * Rp * Xf + Rg * Tp + Tg</span>
        <span class="c1"># R = Rg * Rp</span>
        <span class="c1"># T = Rg * Tp + Tg</span>
        <span class="c1">#</span>
        <span class="c1"># So Rp = Rg.inv() * R</span>
        <span class="c1"># ====================================================================================================================================</span>

        <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_convention_dev</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="n">allow_None</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">R_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">rotation</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="p">,</span> <span class="n">convention</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="n">R_parent</span><span class="o">.</span><span class="n">inv</span><span class="p">()</span> <span class="o">*</span> <span class="n">rotation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The rotation between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::  </span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_rotation` to get the rotation in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_rotation` to set the rotation in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation : Rotation</span>
<span class="sd">            The rotation between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Rotation</span>
<span class="sd">            The rotation between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>

    <span class="nd">@global_rotation</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">:</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>
    


<div class="viewcode-block" id="Frame.get_global_translation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_global_translation.html#py3dframe.Frame.get_global_translation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_translation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the translation vector between the global frame and this frame in the given convention.</span>

<span class="sd">        The translation vector has shape (3, 1).</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_translation` to get or set the translation vector between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_global_translation` to set the translation vector between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`get_translation` to get the translation vector between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The translation vector between the global frame and this frame in the given convention with shape (3, 1).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>
<span class="sd">        </span>
<span class="sd">        Lets assume the train moves and the person moves inside the train.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">            person.set_translation([0, 2, 0], convention=0) # The person moves by 1 unit along the y axis of the train frame.</span>
<span class="sd">            person.set_euler_angles([0, 0, 45], convention=0, degrees=True) # The person rotates of 45 degrees around the z axis of the train frame.</span>

<span class="sd">        If an application using an other convention required the translation between the global frame and the person frame in the convention 4, you can access this translation with the :meth:`get_global_translation` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            global_translation_person = person.get_global_translation(convention=4) # Get the translation between the global frame and the person frame in convention 4.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">get_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Frame.set_global_translation">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_global_translation.html#py3dframe.Frame.set_global_translation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_translation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">translation</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the translation vector between the global frame and this frame in the given convention.</span>

<span class="sd">        The translation vector must be a array-like with 3 elements.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_translation` to get or set the translation vector between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_translation` to get the translation vector between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`set_translation` to set the translation vector between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray</span>
<span class="sd">            The translation vector between the global frame and this frame in the given convention as an array-like with 3 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>
<span class="sd">        </span>
<span class="sd">        Lets assume the train moves.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">        If an application using an other convention gives the new translation between the global frame and the person frame in the convention 4, you can set this translation with the :meth:`set_global_translation` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            translation = ... # Get the new translation between the global frame and the person frame in convention 4 from the application.</span>

<span class="sd">            person.set_global_translation(translation, convention=4) # Set the translation between the global frame and the person frame in convention 4.</span>

<span class="sd">        The person frame is updated accordingly to keep the correct transformation between the global frame and the person frame.</span>

<span class="sd">        Then we can determine the new orientation and position of the person relative to the train frame:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(&quot;Person origin in the train frame:&quot;, person.origin)</span>
<span class="sd">            print(&quot;Person axes in the train frame:&quot;, person.axes)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="c1"># ====================================================================================================================================</span>
        <span class="c1"># Lets note : </span>
        <span class="c1"># Xg : the coordinates of a point in the global frame</span>
        <span class="c1"># Xp : the coordinates of the same point in the parent frame</span>
        <span class="c1"># Xf : the coordinates of the same point in the frame</span>
        <span class="c1"># Rg : the rotation matrix between the global frame and the parent frame</span>
        <span class="c1"># Rp : the rotation matrix between the parent frame and this frame</span>
        <span class="c1"># Tg : the translation vector between the global frame and the parent frame</span>
        <span class="c1"># Tp : the translation vector between the parent frame and this frame</span>
        <span class="c1"># R : the rotation matrix between the global frame and this frame</span>
        <span class="c1"># T : the translation vector between the global frame and this frame</span>
        <span class="c1"># </span>
        <span class="c1"># We have :</span>
        <span class="c1"># Xg = Rg * Xp + Tg</span>
        <span class="c1"># Xp = Rp * Xf + Tp</span>
        <span class="c1"># Xg = R * Xf + T</span>
        <span class="c1">#</span>
        <span class="c1"># We search Tp:</span>
        <span class="c1"># Xg = Rg * (Rp * Xf + Tp) + Tg</span>
        <span class="c1"># Xg = Rg * Rp * Xf + Rg * Tp + Tg</span>
        <span class="c1"># R = Rg * Rp</span>
        <span class="c1"># T = Rg * Tp + Tg</span>
        <span class="c1">#</span>
        <span class="c1"># So Tp = Rg.inv() * (T - Tg)</span>
        <span class="c1"># ====================================================================================================================================</span>

        <span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_convention_dev</span><span class="p">(</span><span class="n">convention</span><span class="p">,</span> <span class="n">allow_None</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">R_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">T_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">get_global_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">_</span><span class="p">,</span> <span class="n">translation</span> <span class="o">=</span> <span class="n">switch_RT_convention</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">convention</span><span class="p">)</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">R_parent</span><span class="o">.</span><span class="n">inv</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">((</span><span class="n">translation</span> <span class="o">-</span> <span class="n">T_parent</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_translation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The translation vector between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_translation` to get the translation vector in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_translation` to set the translation vector in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        translation : numpy.ndarray</span>
<span class="sd">            The translation vector between the global frame and this frame in the convention of the frame as an array-like with 3 elements.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The translation vector between the global frame and this frame in the convention of the frame with shape (3, 1).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>

    <span class="nd">@global_translation</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_translation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">translation</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_translation</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>
    

<div class="viewcode-block" id="Frame.get_global_rotation_matrix">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_global_rotation_matrix.html#py3dframe.Frame.get_global_rotation_matrix">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the rotation matrix representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation matrix between the global frame and this frame in the given convention with shape (3, 3).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>
<span class="sd">        </span>
<span class="sd">        Lets assume the train moves and the person moves inside the train.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">            person.set_translation([0, 2, 0], convention=0) # The person moves by 1 unit along the y axis of the train frame.</span>
<span class="sd">            person.set_euler_angles([0, 0, 45], convention=0, degrees=True) # The person rotates of 45 degrees around the z axis of the train frame.</span>

<span class="sd">        If an application using an other convention required the rotation matrix between the global frame and the person frame in the convention 4, you can access this rotation matrix with the :meth:`get_global_rotation_matrix` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            global_rotation_person = person.get_global_rotation_matrix(convention=4) # Get the rotation matrix between the global frame and the person frame in convention 4.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">get_rotation_matrix</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>


<div class="viewcode-block" id="Frame.set_global_rotation_matrix">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_global_rotation_matrix.html#py3dframe.Frame.set_global_rotation_matrix">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation matrix representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_matrix : numpy.ndarray</span>
<span class="sd">            The rotation matrix between the global frame and this frame in the given convention with shape (3, 3).</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>
<span class="sd">        </span>
<span class="sd">        Lets assume the train moves.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">        If an application using an other convention gives the new rotation matrix between the global frame and the person frame in the convention 4, you can set this rotation with the :meth:`set_global_rotation_matrix` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            rotation_matrix = ... # Get the new rotation matrix between the global frame and the person frame in convention 4 from the application.</span>

<span class="sd">            person.set_global_rotation_matrix(rotation_matrix, convention=4) # Set the rotation matrix between the global frame and the person frame in convention 4.</span>

<span class="sd">        The person frame is updated accordingly to keep the correct transformation between the global frame and the person frame.</span>

<span class="sd">        Then we can determine the new orientation and position of the person relative to the train frame:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(&quot;Person origin in the train frame:&quot;, person.origin)</span>
<span class="sd">            print(&quot;Person axes in the train frame:&quot;, person.axes)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rotation_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_rotation_matrix_dev</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_matrix</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>

    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The rotation matrix representation of the rotation between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_rotation_matrix` to get the rotation matrix in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_rotation_matrix` to set the rotation matrix in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_matrix : numpy.ndarray</span>
<span class="sd">            The rotation matrix between the global frame and this frame in the convention of the frame with shape (3, 3).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation matrix between the global frame and this frame in the convention of the frame with shape (3, 3).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation_matrix</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>

    <span class="nd">@global_rotation_matrix</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation_matrix</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">)</span>


    
<div class="viewcode-block" id="Frame.get_global_quaternion">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_global_quaternion.html#py3dframe.Frame.get_global_quaternion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scalar_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the quaternion representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The quaternion is returned as a numpy array with shape (4,) in the scalar first [w, x, y, z] or scalar last [x, y, z, w] convention.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_quaternion` to get or set the quaternion between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_global_quaternion` to set the quaternion between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`get_quaternion` to get the quaternion between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        scalar_first : bool, optional</span>
<span class="sd">            If True, the quaternion is in the scalar first convention. Default is True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The quaternion between the global frame and this frame in the given convention with shape (4,).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves and the person moves inside the train.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">            person.set_translation([0, 2, 0], convention=0) # The person moves by 1 unit along the y axis of the train frame.</span>
<span class="sd">            person.set_euler_angles([0, 0, 45], convention=0, degrees=True) # The person rotates of 45 degrees around the z axis of the train frame.</span>

<span class="sd">        If an application using an other convention required the quaternion between the global frame and the person frame in the convention 4 and scalar first convention, you can access this quaternion with the :meth:`get_global_quaternion` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            global_quaternion_person = person.get_global_quaternion(convention=4, scalar_first=True) # Get the quaternion between the global frame and the person frame in convention 4 in the scalar first convention.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">get_quaternion</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="n">scalar_first</span><span class="p">)</span></div>


<div class="viewcode-block" id="Frame.set_global_quaternion">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_global_quaternion.html#py3dframe.Frame.set_global_quaternion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quaternion</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scalar_first</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the quaternion representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The quaternion must be a array-like with 4 elements in the scalar first [w, x, y, z] or scalar last [x, y, z, w] convention.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_quaternion` to get or set the quaternion between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_quaternion` to get the quaternion between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`set_quaternion` to set the quaternion between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        quaternion : numpy.ndarray</span>
<span class="sd">            The quaternion between the global frame and this frame in the given convention as an array-like with 4 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        scalar_first : bool, optional</span>
<span class="sd">            If True, the quaternion is in the scalar first convention. Default is True.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">        If an application using an other convention gives the new quaternion between the global frame and the person frame in the convention 4 and scalar first convention, you can set this quaternion with the :meth:`set_global_quaternion` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            quaternion = ... # Get the new quaternion between the global frame and the person frame in convention 4 in the scalar first convention from the application.</span>

<span class="sd">            person.set_global_quaternion(quaternion, convention=4, scalar_first=True) # Set the quaternion between the global frame and the person frame in convention 4 in the scalar first convention.</span>

<span class="sd">        The person frame is updated accordingly to keep the correct transformation between the global frame and the person frame.</span>

<span class="sd">        Then we can determine the new orientation and position of the person relative to the train frame:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(&quot;Person origin in the train frame:&quot;, person.origin)</span>
<span class="sd">            print(&quot;Person axes in the train frame:&quot;, person.axes)</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">quaternion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_quaternion_dev</span><span class="p">(</span><span class="n">quaternion</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_quat</span><span class="p">(</span><span class="n">quaternion</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="n">scalar_first</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>

    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The quaternion representation of the rotation between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        The quaternion is in the scalar first convention [w, x, y, z].</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_quaternion` to get the quaternion in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_quaternion` to set the quaternion in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        quaternion : numpy.ndarray</span>
<span class="sd">            The quaternion between the global frame and this frame in the convention of the frame as an array-like with 4 elements. The quaternion is in the scalar first convention [w, x, y, z].</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The quaternion between the global frame and this frame in the convention of the frame with shape (4,). The quaternion is in the scalar first convention [w, x, y, z].</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_quaternion</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@global_quaternion</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_quaternion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quaternion</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_quaternion</span><span class="p">(</span><span class="n">quaternion</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    


<div class="viewcode-block" id="Frame.get_global_euler_angles">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_global_euler_angles.html#py3dframe.Frame.get_global_euler_angles">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;xyz&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the Euler angles representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The Euler angles describe the rotation using three elementary rotations about specified axes.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_euler_angles` to get or set the Euler angles between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_global_euler_angles` to set the Euler angles between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`get_euler_angles` to get the Euler angles between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the Euler angles are returned in degrees. Default is False (radians).</span>

<span class="sd">        seq : str, optional</span>
<span class="sd">            The axes of the Euler angles. It must be a string of 3 characters chosen among &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;. Default is &quot;xyz&quot;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The Euler angles between the global frame and this frame in the given convention with shape (3,).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves and the person moves inside the train.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>
<span class="sd">            person.set_translation([0, 2, 0], convention=0) # The person moves by 1 unit along the y axis of the train frame.</span>
<span class="sd">            person.set_euler_angles([0, 0, 45], convention=0, degrees=True) # The person rotates of 45 degrees around the z axis of the train frame.</span>

<span class="sd">        If an application using an other convention required the Euler angles between the global frame and the person frame in the convention 4, with the axes &quot;zyx&quot; and in degrees, you can access these Euler angles with the :meth:`get_global_euler_angles` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            global_euler_angles_person = person.get_global_euler_angles(convention=4, seq=&quot;zyx&quot;, degrees=True) # Get the Euler angles between the global frame and the person frame in convention 4 with the axes &quot;zyx&quot; and in degrees.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">get_euler_angles</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">,</span> <span class="n">seq</span><span class="o">=</span><span class="n">seq</span><span class="p">)</span></div>


<div class="viewcode-block" id="Frame.set_global_euler_angles">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_global_euler_angles.html#py3dframe.Frame.set_global_euler_angles">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;xyz&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Euler angles representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The Euler angles must be a array-like with 3 elements representing the angles of rotation about the specified axes.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_euler_angles` to get or set the Euler angles between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_euler_angles` to get the Euler angles between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`set_euler_angles` to set the Euler angles between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        euler_angles : numpy.ndarray</span>
<span class="sd">            The Euler angles between the global frame and this frame in the given convention as an array-like with 3 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the Euler angles are in degrees. Default is False (radians).</span>

<span class="sd">        seq : str, optional</span>
<span class="sd">            The axes of the Euler angles. It must be a string of 3 characters chosen among &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;. Default is &quot;xyz&quot;.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">        If an application using an other convention gives the new Euler angles between the global frame and the person frame in the convention 4, with the axes &quot;zyx&quot; and in degrees, you can set these Euler angles with the :meth:`set_global_euler_angles` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            euler_angles = ... # Get the new Euler angles between the global frame and the person frame in convention 4 with the axes &quot;zyx&quot; and in degrees from the application.</span>

<span class="sd">            person.set_global_euler_angles(euler_angles, convention=4, seq=&quot;zyx&quot;, degrees=True) # Set the Euler angles between the global frame and the person frame in convention 4 with the axes &quot;zyx&quot; and in degrees.</span>

<span class="sd">        The person frame is updated accordingly to keep the correct transformation between the global frame and the person frame.</span>

<span class="sd">        Then we can determine the new orientation and position of the person relative to the train frame:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(&quot;Person origin in the train frame:&quot;, person.origin)</span>
<span class="sd">            print(&quot;Person axes in the train frame:&quot;, person.axes)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The degrees parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The seq parameter must be a string.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The seq parameter must have 3 characters.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">s</span> <span class="ow">in</span> <span class="s1">&#39;XYZxyz&#39;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The seq must contain only the characters &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;.&quot;</span><span class="p">)</span> 
        <span class="n">euler_angles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_euler_angles_dev</span><span class="p">(</span><span class="n">euler_angles</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_euler</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The Euler angles representation of the rotation between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        The Euler angles describe the rotation using three elementary rotations about specified axes in the &quot;xyz&quot; order and are in radians.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_euler_angles` to get the Euler angles in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_euler_angles` to set the Euler angles in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        euler_angles : numpy.ndarray</span>
<span class="sd">            The Euler angles between the global frame and this frame in the convention of the frame as an array-like with 3 elements. The Euler angles are in the &quot;xyz&quot; order and in radians.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The Euler angles between the global frame and this frame in the convention of the frame with shape (3,). The Euler angles are in the &quot;xyz&quot; order and in radians.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_euler_angles</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span>

    <span class="nd">@global_euler_angles</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_euler_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_euler_angles</span><span class="p">(</span><span class="n">euler_angles</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span>
    


<div class="viewcode-block" id="Frame.get_global_rotation_vector">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.get_global_rotation_vector.html#py3dframe.Frame.get_global_rotation_vector">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_global_rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access the rotation vector representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The rotation vector is a compact representation of a rotation in 3D space, where the direction of the vector indicates the axis of rotation and the magnitude represents the angle of rotation.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_rotation_vector` to get or set the rotation vector between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`set_global_rotation_vector` to set the rotation vector between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`get_rotation_vector` to get the rotation vector between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the rotation vector is returned in degrees. Default is False (radians).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation vector between the global frame and this frame in the given convention with shape (3,).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves and the person moves inside the train.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">            person.set_translation([0, 2, 0], convention=0) # The person moves by 1 unit along the y axis of the train frame.</span>
<span class="sd">            person.set_euler_angles([0, 0, 45], convention=0, degrees=True) # The person rotates of 45 degrees around the z axis of the train frame.</span>

<span class="sd">        If an application using an other convention required the rotation vector between the global frame and the person frame in the convention 4, you can access this rotation vector with the :meth:`get_global_rotation_vector` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            global_rotation_vector_person = person.get_global_rotation_vector(convention=4, degrees=True) # Get the rotation vector between the global frame and the person frame in convention 4 in degrees.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">get_rotation_vector</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span></div>


<div class="viewcode-block" id="Frame.set_global_rotation_vector">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.set_global_rotation_vector.html#py3dframe.Frame.set_global_rotation_vector">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_global_rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_vector</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convention</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation vector representation of the rotation between the global frame and this frame in the given convention.</span>

<span class="sd">        The rotation vector must be a array-like with 3 elements representing the axis of rotation and the angle of rotation. The direction of the vector indicates the axis of rotation and the magnitude represents the angle of rotation.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - attribute :attr:`global_rotation_vector` to get or set the rotation vector between the global frame and this frame in the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_rotation_vector` to get the rotation vector between the global frame and this frame in a specific convention.</span>
<span class="sd">            - method :meth:`set_rotation_vector` to set the rotation vector between the parent frame and this frame in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_vector : numpy.ndarray</span>
<span class="sd">            The rotation vector between the global frame and this frame in the given convention as an array-like with 3 elements.</span>

<span class="sd">        convention : Optional[int], optional</span>
<span class="sd">            Integer in ``[0, 7]`` selecting the convention. Defaults to the frames own convention.</span>

<span class="sd">        degrees : bool, optional</span>
<span class="sd">            If True, the rotation vector is in degrees. Default is False (radians).</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Lets consider a train and a person standing into the train.</span>

<span class="sd">        First we can define the train frame relative to the global frame (the canonical frame) and then we can define the person frame relative to the train frame.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from py3dframe import Frame</span>

<span class="sd">            train = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=None)</span>
<span class="sd">            person = Frame.from_axes(origin=[0, 1, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], parent=train)</span>

<span class="sd">        Lets assume the train moves.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            train.set_translation([10, 0, 0], convention=0) # The train moves of 10 units along the x axis of the global frame.</span>

<span class="sd">        If an application using an other convention gives the new rotation vector between the global frame and the person frame in the convention 4, you can set this rotation vector with the :meth:`set_global_rotation_vector` method:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            import numpy</span>

<span class="sd">            rotation_vector = ... # Get the new rotation vector between the global frame and the person frame in convention 4 from the application.</span>

<span class="sd">            person.set_global_rotation_vector(rotation_vector, convention=4, degrees=True) # Set the rotation vector between the global frame and the person frame in convention 4 in degrees.</span>

<span class="sd">        The person frame is updated accordingly to keep the correct transformation between the global frame and the person frame.</span>

<span class="sd">        Then we can determine the new orientation and position of the person relative to the train frame:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(&quot;Person origin in the train frame:&quot;, person.origin)</span>
<span class="sd">            print(&quot;Person axes in the train frame:&quot;, person.axes)</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The degrees parameter must be a boolean.&quot;</span><span class="p">)</span>
        <span class="n">rotation_vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_rotation_vector_dev</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="n">degrees</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></div>

    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The rotation vector representation of the rotation between the global frame and this frame in the convention of the frame.</span>

<span class="sd">        The rotation vector describes the rotation using an axis of rotation and an angle of rotation in radians.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`convention` to get or set the convention of the frame.</span>
<span class="sd">            - method :meth:`get_global_rotation_vector` to get the rotation vector in a specific convention.</span>
<span class="sd">            - method :meth:`set_global_rotation_vector` to set the rotation vector in a specific convention.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rotation_vector : numpy.ndarray</span>
<span class="sd">            The rotation vector between the global frame and this frame in the convention of the frame as an array-like with 3 elements. The rotation vector is in radians.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The rotation vector between the global frame and this frame in the convention of the frame with shape (3,). The rotation vector is in radians.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation_vector</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@global_rotation_vector</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_rotation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_vector</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation_vector</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The basis vectors of the frame relative to the global frame.</span>

<span class="sd">        The axes is a 3x3 matrix with shape (3, 3) representing the basis vectors of the frame in the global frame coordinates.</span>
<span class="sd">        The first column is the x-axis, the second column is the y-axis and the third column is the z-axis.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`global_x_axis` to access the x-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_y_axis` to access the y-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_z_axis` to access the z-axis of the frame.</span>
<span class="sd">            - attribute :attr:`axes` to access the basis vectors relative to the parent frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axes : numpy.ndarray</span>
<span class="sd">            The basis vectors of the frame in the global frame coordinates as an array-like with shape (3, 3).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The basis vectors of the frame in the global frame coordinates with shape (3, 3).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">axes</span>

    <span class="nd">@global_axes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_rotation_matrix_dev</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_rotation_matrix</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_x_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The x-axis of the frame relative to the global frame.</span>

<span class="sd">        The x-axis is a 3 elements vector with shape (3, 1) representing the coordinates of the x-axis of the frame in the global frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is not settable. To change the x-axis, use the :attr:`global_axes` attribute.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`global_y_axis` to access the y-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_z_axis` to access the z-axis of the frame.</span>
<span class="sd">            - attribute :attr:`x_axis` to access the x-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The x-axis of the frame in the global frame coordinates with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x_axis</span>
    

    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_y_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The y-axis of the frame relative to the global frame.</span>

<span class="sd">        The y-axis is a 3 elements vector with shape (3, 1) representing the coordinates of the y-axis of the frame in the global frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is not settable. To change the y-axis, use the :attr:`global_axes` attribute.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`global_x_axis` to access the x-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_z_axis` to access the z-axis of the frame.</span>
<span class="sd">            - attribute :attr:`y_axis` to access the y-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The y-axis of the frame in the global frame coordinates with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">y_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">y_axis</span>



    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_z_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The z-axis of the frame relative to the global frame.</span>

<span class="sd">        The z-axis is a 3 elements vector with shape (3, 1) representing the coordinates of the z-axis of the frame in the global frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is not settable. To change the z-axis, use the :attr:`global_axes` attribute.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :attr:`global_x_axis` to access the x-axis of the frame.</span>
<span class="sd">            - attribute :attr:`global_y_axis` to access the y-axis of the frame.</span>
<span class="sd">            - attribute :attr:`z_axis` to access the z-axis of the frame in the parent frame coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The z-axis of the frame in the global frame coordinates with shape (3, 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">z_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_rotation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()[:,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">z_axis</span>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The origin of the frame relative to the global frame.</span>

<span class="sd">        The origin is a 3 elements vector with shape (3, 1) representing the coordinates of the origin of the frame in the global frame coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This property is settable.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - attribute :attr:`parent` to get or set the parent frame.</span>
<span class="sd">            - attribute :meth:`origin` to access the origin of the frame in the parent frame coordinates.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        origin : numpy.ndarray</span>
<span class="sd">            The origin of the frame in the global frame coordinates as an array-like with 3 elements.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            The origin of the frame in the global frame coordinates with shape (3, 1).</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_translation</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">origin</span>
    
    <span class="nd">@global_origin</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">global_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_translation_dev</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_global_translation</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># ====================================================================================================================================</span>
    <span class="c1"># Magic methods</span>
    <span class="c1"># ====================================================================================================================================</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the string representation of the Frame object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The string representation of the Frame object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="n">global_origin</span> <span class="o">=</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">global_x_axis</span> <span class="o">=</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">x_axis</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">global_y_axis</span> <span class="o">=</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">y_axis</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">global_z_axis</span> <span class="o">=</span> <span class="n">global_frame</span><span class="o">.</span><span class="n">z_axis</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Frame(origin=[[</span><span class="si">{</span><span class="n">global_origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_origin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">]], x_axis=[[</span><span class="si">{</span><span class="n">global_x_axis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_x_axis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_x_axis</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">]], y_axis=[[</span><span class="si">{</span><span class="n">global_y_axis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_y_axis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_y_axis</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">]], z_axis=[[</span><span class="si">{</span><span class="n">global_z_axis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_z_axis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">] [</span><span class="si">{</span><span class="n">global_z_axis</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">]])&quot;</span>


    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Frame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the equality of the Frame object.</span>
<span class="sd">        </span>
<span class="sd">        Two Frame objects are equal if their global coordinates are equal.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : Frame</span>
<span class="sd">            The other Frame object to compare.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if the Frame objects are equal, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Frame</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">global_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="n">other_global_frame</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_global_frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">global_frame</span><span class="o">.</span><span class="n">_T_dev</span><span class="p">,</span> <span class="n">other_global_frame</span><span class="o">.</span><span class="n">_T_dev</span><span class="p">)</span> <span class="ow">and</span> <span class="n">numpy</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">global_frame</span><span class="o">.</span><span class="n">_R_dev</span><span class="o">.</span><span class="n">as_quat</span><span class="p">(),</span> <span class="n">other_global_frame</span><span class="o">.</span><span class="n">_R_dev</span><span class="o">.</span><span class="n">as_quat</span><span class="p">())</span>
    

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Frame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the inequality of the Frame object.</span>
<span class="sd">        </span>
<span class="sd">        Two Frame objects are equal if their global coordinates are equal.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : Frame</span>
<span class="sd">            The other Frame object to compare.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if the Frame objects are not equal, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    
<div class="viewcode-block" id="Frame.copy">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.copy.html#py3dframe.Frame.copy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a copy of the Frame object. Same parent frame (shallow copy).</span>

<span class="sd">        .. note::</span>

<span class="sd">            Only the frame itself is copied. The parent frame is not copied and is shared between the original and the copy.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - method :meth:`deepcopy` to create a deep copy of the Frame object (including the parent frame).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            A copy of the Frame object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">translation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">),</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">new_frame</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span>  <span class="c1"># Shallow copy of the parent</span>
        <span class="n">new_frame</span><span class="o">.</span><span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convention</span> <span class="c1"># Use the setter to ensure convention is valid</span>
        <span class="k">return</span> <span class="n">new_frame</span></div>


<div class="viewcode-block" id="Frame.deepcopy">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.deepcopy.html#py3dframe.Frame.deepcopy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a deep copy of the Frame object. Deep copy of the parent frame.</span>

<span class="sd">        .. note::</span>

<span class="sd">            The parent frame is also copied recursively.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - method :meth:`copy` to create a shallow copy of the Frame object (the parent frame is shared).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            A deep copy of the Frame object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">translation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_T_dev</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_R_dev</span><span class="p">),</span> <span class="n">convention</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">new_frame</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">()</span>  <span class="c1"># Deep copy of the parent</span>
        <span class="n">new_frame</span><span class="o">.</span><span class="n">convention</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convention</span> <span class="c1"># Use the setter to ensure convention is valid</span>
        <span class="k">return</span> <span class="n">new_frame</span></div>



    <span class="c1"># ====================================================================================================================================</span>
    <span class="c1"># Load and Save method</span>
    <span class="c1"># ====================================================================================================================================</span>
<div class="viewcode-block" id="Frame.to_dict">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.to_dict.html#py3dframe.Frame.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;quaternion&quot;</span><span class="p">,</span> <span class="s2">&quot;rotation_vector&quot;</span><span class="p">,</span> <span class="s2">&quot;rotation_matrix&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the Frame object to a dictionary.</span>

<span class="sd">        The dictionary has the following structure:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {   </span>
<span class="sd">                &quot;package&quot;: &quot;py3dframe&quot;,</span>
<span class="sd">                &quot;class&quot;: &quot;Frame&quot;,</span>
<span class="sd">                &quot;version&quot;: __version__,</span>
<span class="sd">                &quot;translation&quot;: [float, float, float],</span>
<span class="sd">                &quot;quaternion&quot;: [float, float, float, float],</span>
<span class="sd">                &quot;rotation_vector&quot;: [float, float, float],</span>
<span class="sd">                &quot;rotation_matrix&quot;: [[float, float, float], [float, float, float], [float, float, float]],</span>
<span class="sd">                &quot;euler_angles&quot;: [float, float, float],</span>
<span class="sd">                &quot;convention&quot;: int</span>
<span class="sd">            }</span>

<span class="sd">        - The quaternion is given in WXYZ format (scalar first).</span>
<span class="sd">        - The rotation vector is given in radians.</span>
<span class="sd">        - The Euler angles are given in radians and the axes are &quot;xyz&quot;.</span>
<span class="sd">        - The rotation is given in the convention of the frame.</span>
<span class="sd">        - The translation vector is given in the convention of the frame.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - method :meth:`from_dict` to load the Frame object from a dictionary.</span>
<span class="sd">            - class :class:`FrameTree` to save/load a system of frames.</span>
<span class="sd">            </span>
<span class="sd">        .. note::</span>

<span class="sd">            For the reader, only one of the rotation keys is needed to reconstruct the frame. The other keys are provided for convenience and user experience.</span>
<span class="sd">            The reader chooses the key to use in the following order of preference if several are given:</span>

<span class="sd">            - quaternion</span>
<span class="sd">            - rotation_vector</span>
<span class="sd">            - rotation_matrix</span>
<span class="sd">            - euler_angles</span>

<span class="sd">        .. warning::</span>

<span class="sd">            ``euler_angles`` can raise a this warning : </span>
<span class="sd">            </span>
<span class="sd">            - UserWarning: Gimbal lock detected. Setting third angle to zero since it is not possible to uniquely determine all angles.</span>
<span class="sd">            </span>
<span class="sd">            I recommand to not use it.</span>
<span class="sd">            </span>
<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            - ``parent`` frame is not saved (only local frame is saved), so the loaded frame must be reattached to the parent frame if needed. (See also :class:`FrameTree` to save/load a system of frames).</span>

<span class="sd">        .. note::</span>

<span class="sd">            For retrocompatibility, the default method &quot;quaternion&quot; must be used.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        method : Union[str, Sequence[str]], optional</span>
<span class="sd">            The method to use to save the rotation. It can be one of the following : &quot;quaternion&quot;, &quot;rotation_vector&quot;, &quot;rotation_matrix&quot; or &quot;euler_angles&quot;.</span>
<span class="sd">            Several methods can be used at the same time. Default is [&quot;quaternion&quot;, &quot;rotation_vector&quot;, &quot;rotation_matrix&quot;].</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            The dictionary containing the Frame object.</span>
<span class="sd">            </span>
<span class="sd">            </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        </span>
<span class="sd">        Create a Frame object and save it to a dictionary using the default method (quaternion, rotation_vector, rotation_matrix):</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            frame = Frame.from_axes(origin=[1, 2, 3], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            frame_dict = frame.to_dict()</span>
<span class="sd">        </span>
<span class="sd">            # Reload the Frame object from the dictionary:</span>
<span class="sd">        </span>
<span class="sd">            loaded_frame = Frame.from_dict(frame_dict)</span>
<span class="sd">            </span>
<span class="sd">        Warning, the method no longer saves the parent frame. To save/load a system of frames, consider using the :class:`FrameTree` class.</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            </span>
<span class="sd">            parent = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            child = Frame.from_axes(origin=[1, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0, parent=parent)</span>
<span class="sd">            </span>
<span class="sd">            child_dict = child.to_dict(method=[&quot;quaternion&quot;, &quot;rotation_vector&quot;])</span>
<span class="sd">            parent_dict = parent.to_dict(method=[&quot;quaternion&quot;, &quot;rotation_vector&quot;])</span>
<span class="sd">            </span>
<span class="sd">            # Reload the frames from the dictionaries</span>
<span class="sd">            loaded_parent = Frame.from_dict(parent_dict)</span>
<span class="sd">            loaded_child = Frame.from_dict(child_dict)</span>
<span class="sd">            loaded_child.parent = loaded_parent # IMPORTANT </span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if the method is a string or a list of strings</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">method</span> <span class="o">=</span> <span class="p">[</span><span class="n">method</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The method must be a string or a list of strings.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;quaternion&quot;</span><span class="p">,</span> <span class="s2">&quot;rotation_vector&quot;</span><span class="p">,</span> <span class="s2">&quot;rotation_matrix&quot;</span><span class="p">,</span> <span class="s2">&quot;euler_angles&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">method</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The method must be one of the following : &#39;quaternion&#39;, &#39;rotation_vector&#39;, &#39;rotation_matrix&#39; or &#39;euler_angles&#39;.&quot;</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;package&quot;</span><span class="p">:</span> <span class="s2">&quot;py3dframe&quot;</span><span class="p">,</span>
            <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;Frame&quot;</span><span class="p">,</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">__version__</span><span class="p">,</span>
            <span class="s2">&quot;translation&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
            <span class="s2">&quot;convention&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convention</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># Add the rotation method to the dictionary</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">method</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="s2">&quot;quaternion&quot;</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;quaternion&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_quaternion</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">m</span> <span class="o">==</span> <span class="s2">&quot;rotation_vector&quot;</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;rotation_vector&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation_vector</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">m</span> <span class="o">==</span> <span class="s2">&quot;rotation_matrix&quot;</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;rotation_matrix&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation_matrix</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">m</span> <span class="o">==</span> <span class="s2">&quot;euler_angles&quot;</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;euler_angles&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_euler_angles</span><span class="p">(</span><span class="n">convention</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seq</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="c1"># Add the parent frame to the dictionary</span>
        <span class="k">return</span> <span class="n">data</span></div>




<div class="viewcode-block" id="Frame.from_dict">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_dict.html#py3dframe.Frame.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the Frame object from a dictionary.</span>

<span class="sd">        The dictionary has the following structure:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">                &quot;package&quot;: &quot;py3dframe&quot;,</span>
<span class="sd">                &quot;class&quot;: &quot;Frame&quot;,</span>
<span class="sd">                &quot;version&quot;: __version__,</span>
<span class="sd">                &quot;translation&quot;: [float, float, float],</span>
<span class="sd">                &quot;quaternion&quot;: [float, float, float, float],</span>
<span class="sd">                &quot;rotation_vector&quot;: [float, float, float],</span>
<span class="sd">                &quot;rotation_matrix&quot;: [[float, float, float], [float, float, float], [float, float, float]],</span>
<span class="sd">                &quot;euler_angles&quot;: [float, float, float],</span>
<span class="sd">                &quot;convention&quot;: int</span>
<span class="sd">            }</span>

<span class="sd">        - The quaternion is given in WXYZ format (scalar first).</span>
<span class="sd">        - The rotation vector is given in radians.</span>
<span class="sd">        - The Euler angles are given in radians and the axes are &quot;xyz&quot;.</span>
<span class="sd">        - The rotation is given in the convention of the frame.</span>
<span class="sd">        - The translation vector is given in the convention of the frame.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - method :meth:`to_dict` to save the Frame object to a dictionary.</span>
<span class="sd">            - :meth:`FrameTree.from_dict` to load a system of frames from a dictionary.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Only one of the rotation keys is needed to reconstruct the frame. </span>
<span class="sd">            The reader chooses the key to use in the following order of preference if several are given:</span>

<span class="sd">            - quaternion</span>
<span class="sd">            - rotation_vector</span>
<span class="sd">            - rotation_matrix</span>
<span class="sd">            - euler_angles</span>

<span class="sd">        .. warning::</span>

<span class="sd">            ``euler_angles`` can raise a this warning : </span>
<span class="sd">            </span>
<span class="sd">            - UserWarning: Gimbal lock detected. Setting third angle to zero since it is not possible to uniquely determine all angles.</span>

<span class="sd">            I recommand to not use it.</span>
<span class="sd">            </span>
<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            - ``parent`` frame is not loaded (only local frame is saved), so the loaded frame must be reattached to the parent frame if needed. (See also :class:`FrameTree` to save/load a system of frames).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : Dict[str, Any]</span>
<span class="sd">            The dictionary containing the Frame object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object.</span>
<span class="sd">            </span>
<span class="sd">        </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        </span>
<span class="sd">        Create a Frame object and save it to a dictionary using the default method (quaternion, rotation_vector, rotation_matrix):</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            frame = Frame.from_axes(origin=[1, 2, 3], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            frame_dict = frame.to_dict()</span>
<span class="sd">        </span>
<span class="sd">            # Reload the Frame object from the dictionary:</span>
<span class="sd">        </span>
<span class="sd">            loaded_frame = Frame.from_dict(frame_dict)</span>
<span class="sd">            </span>
<span class="sd">        Warning, the method no longer saves the parent frame. To save/load a system of frames, consider using the :class:`FrameTree` class.</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            </span>
<span class="sd">            parent = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            child = Frame.from_axes(origin=[1, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0, parent=parent)</span>
<span class="sd">            </span>
<span class="sd">            child_dict = child.to_dict(method=[&quot;quaternion&quot;, &quot;rotation_vector&quot;])</span>
<span class="sd">            parent_dict = parent.to_dict(method=[&quot;quaternion&quot;, &quot;rotation_vector&quot;])</span>
<span class="sd">            </span>
<span class="sd">            # Reload the frames from the dictionaries</span>
<span class="sd">            </span>
<span class="sd">            loaded_parent = Frame.from_dict(parent_dict)</span>
<span class="sd">            loaded_child = Frame.from_dict(child_dict)</span>
<span class="sd">            loaded_child.parent = loaded_parent # IMPORTANT </span>
<span class="sd">            </span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if the data is a dictionary and contains the required keys</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The data must be a dictionary.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;translation&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The dictionary must contain the &#39;translation&#39; key.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;quaternion&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s2">&quot;rotation_vector&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s2">&quot;rotation_matrix&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s2">&quot;euler_angles&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The dictionary must contain at least one of the &#39;quaternion&#39;, &#39;rotation_vector&#39;, &#39;rotation_matrix&#39; or &#39;euler_angles&#39; keys.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;convention&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The dictionary must contain the &#39;convention&#39; key.&quot;</span><span class="p">)</span>

        <span class="c1"># Convert the data to the correct types</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;translation&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="n">convention</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;convention&quot;</span><span class="p">]</span>

        <span class="c1"># According to the order of preference, create the rotation object</span>
        <span class="k">if</span> <span class="s2">&quot;quaternion&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">quaternion</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;quaternion&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_quat</span><span class="p">(</span><span class="n">quaternion</span><span class="p">,</span> <span class="n">scalar_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;rotation_vector&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">rotation_vector</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;rotation_vector&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">(</span><span class="n">rotation_vector</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;rotation_matrix&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">rotation_matrix</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;rotation_matrix&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_matrix</span><span class="p">(</span><span class="n">rotation_matrix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;euler_angles&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">euler_angles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;euler_angles&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">Rotation</span><span class="o">.</span><span class="n">from_euler</span><span class="p">(</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span> <span class="n">euler_angles</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The dictionary must contain at least one of the &#39;quaternion&#39;, &#39;rotation_vector&#39;, &#39;rotation_matrix&#39; or &#39;euler_angles&#39; keys.&quot;</span><span class="p">)</span>
        
        <span class="c1"># Create the Frame object</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_rotation</span><span class="p">(</span><span class="n">translation</span><span class="o">=</span><span class="n">translation</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frame</span></div>




<div class="viewcode-block" id="Frame.to_json">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.to_json.html#py3dframe.Frame.to_json">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the Frame object to a JSON file.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - method :meth:`to_dict` to save the Frame object to a dictionary.</span>
<span class="sd">            </span>
<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            - ``parent`` frame is not saved (only local frame is saved), so the loaded frame must be reattached to the parent frame if needed. (See also :class:`FrameTree` to save/load a system of frames).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename : str</span>
<span class="sd">            The name of the JSON file.</span>
<span class="sd">            </span>
<span class="sd">        </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        </span>
<span class="sd">        Create a Frame object and save it to a JSON file using the default method (quaternion, rotation_vector, rotation_matrix):</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            frame = Frame.from_axes(origin=[1, 2, 3], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            frame.to_json(&quot;frame.json&quot;)</span>
<span class="sd">            </span>
<span class="sd">            # Reload the Frame object from the JSON file:</span>
<span class="sd">            </span>
<span class="sd">            loaded_frame = Frame.from_json(&quot;frame.json&quot;)</span>
<span class="sd">            </span>
<span class="sd">        Warning, the method no longer saves the parent frame. To save/load a system of frames, consider using the :class:`FrameTree` class.</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            </span>
<span class="sd">            parent = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            child = Frame.from_axes(origin=[1, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0, parent=parent)</span>
<span class="sd">            </span>
<span class="sd">            child.to_json(&quot;child_frame.json&quot;)</span>
<span class="sd">            parent.to_json(&quot;parent_frame.json&quot;)</span>
<span class="sd">            </span>
<span class="sd">            # Reload the frames from the JSON files</span>
<span class="sd">            </span>
<span class="sd">            loaded_parent = Frame.from_json(&quot;parent_frame.json&quot;)</span>
<span class="sd">            loaded_child = Frame.from_json(&quot;child_frame.json&quot;)</span>
<span class="sd">            loaded_child.parent = loaded_parent # IMPORTANT</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></div>

    


<div class="viewcode-block" id="Frame.from_json">
<a class="viewcode-back" href="../../generated/py3dframe.Frame.from_json.html#py3dframe.Frame.from_json">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Frame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the Frame object from a JSON file.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - method :meth:`from_dict` to load the Frame object from a dictionary.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename : str</span>
<span class="sd">            The name of the JSON file.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Frame</span>
<span class="sd">            The Frame object.</span>
<span class="sd">            </span>
<span class="sd">        </span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        </span>
<span class="sd">        Create a Frame object and save it to a JSON file using the default method (quaternion, rotation_vector, rotation_matrix):</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            frame = Frame.from_axes(origin=[1, 2, 3], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            frame.to_json(&quot;frame.json&quot;)</span>
<span class="sd">            </span>
<span class="sd">            # Reload the Frame object from the JSON file:</span>
<span class="sd">            </span>
<span class="sd">            loaded_frame = Frame.from_json(&quot;frame.json&quot;)</span>
<span class="sd">            </span>
<span class="sd">        Warning, the method no longer saves the parent frame. To save/load a system of frames, consider using the :class:`FrameTree` class.</span>
<span class="sd">        </span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">        </span>
<span class="sd">            from py3dframe import Frame</span>
<span class="sd">            </span>
<span class="sd">            parent = Frame.from_axes(origin=[0, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0)</span>
<span class="sd">            child = Frame.from_axes(origin=[1, 0, 0], x_axis=[1, 0, 0], y_axis=[0, 1, 0], z_axis=[0, 0, 1], convention=0, parent=parent)</span>
<span class="sd">            </span>
<span class="sd">            child.to_json(&quot;child_frame.json&quot;)</span>
<span class="sd">            parent.to_json(&quot;parent_frame.json&quot;)</span>
<span class="sd">            </span>
<span class="sd">            # Reload the frames from the JSON files</span>
<span class="sd">            </span>
<span class="sd">            loaded_parent = Frame.from_json(&quot;parent_frame.json&quot;)</span>
<span class="sd">            loaded_child = Frame.from_json(&quot;child_frame.json&quot;)</span>
<span class="sd">            loaded_child.parent = loaded_parent # IMPORTANT</span>
<span class="sd">            </span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frame</span></div>
</div>

</pre></div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
       Copyright 2025-2026, Artezaru.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>